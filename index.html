<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Virtual Pet Paradise</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Open+Sans:wght@400;600;700&display=swap');
        
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Open Sans', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .game-title {
            font-family: 'Fredoka One', cursive;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 3s ease infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .pet-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .pet-sprite {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            margin: 20px auto;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            animation: petBreathe 2s ease-in-out infinite;
        }
        
        @keyframes petBreathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .pet-sprite:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .pet-sprite.happy {
            animation: petJump 0.6s ease-in-out;
        }
        
        @keyframes petJump {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .status-bar {
            height: 20px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .status-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .status-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        .hunger { background: linear-gradient(90deg, #ff6b6b, #ee5a52); }
        .happiness { background: linear-gradient(90deg, #4ecdc4, #44a08d); }
        .cleanliness { background: linear-gradient(90deg, #45b7d1, #3498db); }
        .energy { background: linear-gradient(90deg, #96ceb4, #27ae60); }
        .health { background: linear-gradient(90deg, #f093fb, #f5576c); }
        .intelligence { background: linear-gradient(90deg, #ffecd2, #fcb69f); }
        
        .action-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .action-btn:active {
            transform: translateY(0);
        }
        
        .mini-game {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin: 10px 0;
        }
        
        .pet-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }
        
        .pet-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .pet-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
        }
        
        .achievement {
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #e17055;
        }
        
        .weather {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.9);
            padding: 10px 15px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        .day-night-cycle {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            transition: background 2s ease;
        }
        
        .day-night-cycle.day {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .day-night-cycle.night {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
        }
        
        .shop-item {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin: 10px;
            border: 2px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .shop-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        
        .hidden { display: none; }
        
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #4ecdc4;
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            z-index: 1001;
            animation: slideDown 0.5s ease;
        }
        
        @keyframes slideDown {
            from { transform: translateX(-50%) translateY(-100px); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }
        
        .game-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .game-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .game-card:hover {
            background: #e9ecef;
            transform: scale(1.05);
        }
        
        .game-card.matched {
            background: #4ecdc4;
            color: white;
            border-color: #44a08d;
        }
        
        .pet-stats-chart {
            width: 100%;
            height: 300px;
            margin: 20px 0;
        }
        
        .environment-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 20px;
            background-size: cover;
            background-position: center;
            opacity: 0.3;
            transition: all 0.5s ease;
        }
        
        .floating-hearts {
            position: absolute;
            font-size: 20px;
            color: #ff6b6b;
            animation: floatUp 2s ease-out forwards;
            pointer-events: none;
        }
        
        @keyframes floatUp {
            from {
                transform: translateY(0);
                opacity: 1;
            }
            to {
                transform: translateY(-50px);
                opacity: 0;
            }
        }
        
        .pet-trait {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            border-radius: 20px;
            padding: 10px 15px;
            margin: 5px;
            display: inline-block;
            font-size: 12px;
            font-weight: 600;
            color: #333;
        }
        
        .evolution-stage {
            text-align: center;
            padding: 20px;
            margin: 10px 0;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px;
        }
    </style>
</head>
<body>
    <div class="day-night-cycle day" id="dayNightCycle"></div>
    
    <!-- Weather Widget -->
    <div class="weather" id="weatherWidget">
        <i class="fas fa-sun text-yellow-500"></i>
        <span class="ml-2">Sunny</span>
    </div>
    
    <!-- Main Game Container -->
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="game-title text-6xl font-bold mb-4">üåü Virtual Pet Paradise üåü</h1>
            <div class="flex justify-center items-center space-x-6">
                <div class="bg-white rounded-full px-4 py-2 shadow-lg">
                    <i class="fas fa-coins text-yellow-500"></i>
                    <span class="ml-2 font-bold" id="coins">100</span>
                </div>
                <div class="bg-white rounded-full px-4 py-2 shadow-lg">
                    <i class="fas fa-trophy text-purple-500"></i>
                    <span class="ml-2 font-bold" id="level">1</span>
                </div>
                <div class="bg-white rounded-full px-4 py-2 shadow-lg">
                    <i class="fas fa-star text-blue-500"></i>
                    <span class="ml-2 font-bold" id="experience">0/100</span>
                </div>
            </div>
        </header>
        
        <!-- Pet Selection Screen -->
        <div id="petSelectionScreen" class="max-w-6xl mx-auto">
            <h2 class="text-3xl font-bold text-white text-center mb-8">Choose Your Virtual Pet</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="pet-card" data-pet="cat">
                    <div class="text-6xl text-center mb-4">üê±</div>
                    <h3 class="text-xl font-bold text-center">Cat</h3>
                    <p class="text-gray-600 text-center">Independent and playful</p>
                    <div class="mt-3">
                        <span class="pet-trait">Curious</span>
                        <span class="pet-trait">Agile</span>
                        <span class="pet-trait">Sleepy</span>
                    </div>
                </div>
                <div class="pet-card" data-pet="dog">
                    <div class="text-6xl text-center mb-4">üêï</div>
                    <h3 class="text-xl font-bold text-center">Dog</h3>
                    <p class="text-gray-600 text-center">Loyal and energetic</p>
                    <div class="mt-3">
                        <span class="pet-trait">Loyal</span>
                        <span class="pet-trait">Energetic</span>
                        <span class="pet-trait">Friendly</span>
                    </div>
                </div>
                <div class="pet-card" data-pet="bird">
                    <div class="text-6xl text-center mb-4">ü¶ú</div>
                    <h3 class="text-xl font-bold text-center">Bird</h3>
                    <p class="text-gray-600 text-center">Intelligent and social</p>
                    <div class="mt-3">
                        <span class="pet-trait">Smart</span>
                        <span class="pet-trait">Social</span>
                        <span class="pet-trait">Musical</span>
                    </div>
                </div>
                <div class="pet-card" data-pet="fish">
                    <div class="text-6xl text-center mb-4">üê†</div>
                    <h3 class="text-xl font-bold text-center">Fish</h3>
                    <p class="text-gray-600 text-center">Calm and graceful</p>
                    <div class="mt-3">
                        <span class="pet-trait">Peaceful</span>
                        <span class="pet-trait">Graceful</span>
                        <span class="pet-trait">Zen</span>
                    </div>
                </div>
                <div class="pet-card" data-pet="hamster">
                    <div class="text-6xl text-center mb-4">üêπ</div>
                    <h3 class="text-xl font-bold text-center">Hamster</h3>
                    <p class="text-gray-600 text-center">Small and adorable</p>
                    <div class="mt-3">
                        <span class="pet-trait">Tiny</span>
                        <span class="pet-trait">Active</span>
                        <span class="pet-trait">Cute</span>
                    </div>
                </div>
                <div class="pet-card" data-pet="rabbit">
                    <div class="text-6xl text-center mb-4">üê∞</div>
                    <h3 class="text-xl font-bold text-center">Rabbit</h3>
                    <p class="text-gray-600 text-center">Gentle and hopeful</p>
                    <div class="mt-3">
                        <span class="pet-trait">Gentle</span>
                        <span class="pet-trait">Quick</span>
                        <span class="pet-trait">Soft</span>
                    </div>
                </div>
            </div>
            <div class="text-center mt-8">
                <button class="action-btn text-lg px-8 py-3" onclick="confirmPetSelection()">
                    <i class="fas fa-heart mr-2"></i>Start Your Journey
                </button>
            </div>
        </div>
        
        <!-- Main Game Screen -->
        <div id="gameScreen" class="hidden max-w-7xl mx-auto">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Pet Display Area -->
                <div class="lg:col-span-2">
                    <div class="pet-container relative p-8">
                        <div class="environment-bg" id="environmentBg"></div>
                        <div class="relative z-10">
                            <div class="text-center mb-6">
                                <h2 class="text-2xl font-bold mb-2" id="petName">Your Pet</h2>
                                <p class="text-gray-600" id="petMood">Feeling Happy</p>
                            </div>
                            
                            <!-- Pet Sprite -->
                            <div class="pet-sprite" id="petSprite" onclick="petPet()">
                                üê±
                            </div>
                            
                            <!-- Pet Info -->
                            <div class="text-center mt-4">
                                <div class="evolution-stage mb-4">
                                    <h3 class="font-bold">Evolution Stage</h3>
                                    <p id="evolutionStage">Baby</p>
                                    <div class="mt-2">
                                        <div class="status-bar">
                                            <div class="status-fill bg-purple-500" id="evolutionProgress" style="width: 10%"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <p class="font-semibold">Age: <span id="petAge">0 days</span></p>
                                        <p class="font-semibold">Weight: <span id="petWeight">1.0 kg</span></p>
                                    </div>
                                    <div>
                                        <p class="font-semibold">Type: <span id="petType">Cat</span></p>
                                        <p class="font-semibold">Color: <span id="petColor">Orange</span></p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Action Buttons -->
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
                                <button class="action-btn" onclick="feedPet()">
                                    <i class="fas fa-utensils mb-2"></i><br>Feed
                                </button>
                                <button class="action-btn" onclick="cleanPet()">
                                    <i class="fas fa-shower mb-2"></i><br>Clean
                                </button>
                                <button class="action-btn" onclick="playWithPet()">
                                    <i class="fas fa-gamepad mb-2"></i><br>Play
                                </button>
                                <button class="action-btn" onclick="putPetToSleep()">
                                    <i class="fas fa-bed mb-2"></i><br>Sleep
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mini Games Section -->
                    <div class="mt-8">
                        <h3 class="text-2xl font-bold text-white mb-4">üéÆ Mini Games</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="mini-game">
                                <h4 class="font-bold mb-2">üß† Memory Match</h4>
                                <p class="text-sm text-gray-600 mb-3">Test your memory skills!</p>
                                <button class="action-btn w-full" onclick="startMemoryGame()">Play</button>
                            </div>
                            <div class="mini-game">
                                <h4 class="font-bold mb-2">ü¶¥ Catch the Treat</h4>
                                <p class="text-sm text-gray-600 mb-3">Help your pet catch falling treats!</p>
                                <button class="action-btn w-full" onclick="startCatchGame()">Play</button>
                            </div>
                            <div class="mini-game">
                                <h4 class="font-bold mb-2">üß© Puzzle Game</h4>
                                <p class="text-sm text-gray-600 mb-3">Solve puzzles together!</p>
                                <button class="action-btn w-full" onclick="startPuzzleGame()">Play</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Sidebar -->
                <div class="space-y-6">
                    <!-- Status Panel -->
                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <h3 class="text-xl font-bold mb-4">üìä Pet Status</h3>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium">‚ù§Ô∏è Health</span>
                                    <span class="text-sm" id="healthText">100%</span>
                                </div>
                                <div class="status-bar">
                                    <div class="status-fill health" id="healthBar" style="width: 100%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium">üçΩÔ∏è Hunger</span>
                                    <span class="text-sm" id="hungerText">80%</span>
                                </div>
                                <div class="status-bar">
                                    <div class="status-fill hunger" id="hungerBar" style="width: 80%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium">üòä Happiness</span>
                                    <span class="text-sm" id="happinessText">75%</span>
                                </div>
                                <div class="status-bar">
                                    <div class="status-fill happiness" id="happinessBar" style="width: 75%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium">üßº Cleanliness</span>
                                    <span class="text-sm" id="cleanlinessText">90%</span>
                                </div>
                                <div class="status-bar">
                                    <div class="status-fill cleanliness" id="cleanlinessBar" style="width: 90%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium">‚ö° Energy</span>
                                    <span class="text-sm" id="energyText">85%</span>
                                </div>
                                <div class="status-bar">
                                    <div class="status-fill energy" id="energyBar" style="width: 85%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium">üß† Intelligence</span>
                                    <span class="text-sm" id="intelligenceText">60%</span>
                                </div>
                                <div class="status-bar">
                                    <div class="status-fill intelligence" id="intelligenceBar" style="width: 60%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Stats Chart -->
                        <div class="mt-6">
                            <canvas id="statsChart" class="pet-stats-chart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <h3 class="text-xl font-bold mb-4">‚ö° Quick Actions</h3>
                        <div class="space-y-3">
                            <button class="action-btn w-full" onclick="openShop()">
                                <i class="fas fa-shopping-cart mr-2"></i>Pet Shop
                            </button>
                            <button class="action-btn w-full" onclick="openCustomization()">
                                <i class="fas fa-palette mr-2"></i>Customize
                            </button>
                            <button class="action-btn w-full" onclick="openAchievements()">
                                <i class="fas fa-trophy mr-2"></i>Achievements
                            </button>
                            <button class="action-btn w-full" onclick="visitVet()">
                                <i class="fas fa-user-md mr-2"></i>Vet Visit
                            </button>
                            <button class="action-btn w-full" onclick="trainPet()">
                                <i class="fas fa-graduation-cap mr-2"></i>Training
                            </button>
                        </div>
                    </div>
                    
                    <!-- Achievements Preview -->
                    <div class="bg-white rounded-xl p-6 shadow-lg">
                        <h3 class="text-xl font-bold mb-4">üèÜ Recent Achievements</h3>
                        <div id="recentAchievements">
                            <div class="achievement">
                                <i class="fas fa-baby text-pink-500 mr-2"></i>
                                <strong>First Pet</strong><br>
                                <small>Adopted your first virtual pet!</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Pet Shop Modal -->
    <div id="shopModal" class="modal hidden">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold">üõí Pet Shop</h2>
                <button onclick="closeModal('shopModal')" class="text-2xl">&times;</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="shop-item">
                    <div class="text-3xl mb-2">üçé</div>
                    <h4 class="font-bold">Premium Food</h4>
                    <p class="text-sm text-gray-600">Nutritious meal (+30 hunger)</p>
                    <div class="flex justify-between items-center mt-3">
                        <span class="font-bold text-yellow-600">25 ü™ô</span>
                        <button class="action-btn" onclick="buyItem('premium_food', 25)">Buy</button>
                    </div>
                </div>
                <div class="shop-item">
                    <div class="text-3xl mb-2">üß∏</div>
                    <h4 class="font-bold">Toy Bear</h4>
                    <p class="text-sm text-gray-600">Fun toy (+20 happiness)</p>
                    <div class="flex justify-between items-center mt-3">
                        <span class="font-bold text-yellow-600">50 ü™ô</span>
                        <button class="action-btn" onclick="buyItem('toy_bear', 50)">Buy</button>
                    </div>
                </div>
                <div class="shop-item">
                    <div class="text-3xl mb-2">üéÄ</div>
                    <h4 class="font-bold">Bow Tie</h4>
                    <p class="text-sm text-gray-600">Stylish accessory</p>
                    <div class="flex justify-between items-center mt-3">
                        <span class="font-bold text-yellow-600">75 ü™ô</span>
                        <button class="action-btn" onclick="buyItem('bow_tie', 75)">Buy</button>
                    </div>
                </div>
                <div class="shop-item">
                    <div class="text-3xl mb-2">üíä</div>
                    <h4 class="font-bold">Health Potion</h4>
                    <p class="text-sm text-gray-600">Restores health (+50 health)</p>
                    <div class="flex justify-between items-center mt-3">
                        <span class="font-bold text-yellow-600">100 ü™ô</span>
                        <button class="action-btn" onclick="buyItem('health_potion', 100)">Buy</button>
                    </div>
                </div>
                <div class="shop-item">
                    <div class="text-3xl mb-2">üè†</div>
                    <h4 class="font-bold">Luxury Home</h4>
                    <p class="text-sm text-gray-600">Upgrade environment</p>
                    <div class="flex justify-between items-center mt-3">
                        <span class="font-bold text-yellow-600">200 ü™ô</span>
                        <button class="action-btn" onclick="buyItem('luxury_home', 200)">Buy</button>
                    </div>
                </div>
                <div class="shop-item">
                    <div class="text-3xl mb-2">üìö</div>
                    <h4 class="font-bold">Training Book</h4>
                    <p class="text-sm text-gray-600">Increase intelligence (+25 IQ)</p>
                    <div class="flex justify-between items-center mt-3">
                        <span class="font-bold text-yellow-600">80 ü™ô</span>
                        <button class="action-btn" onclick="buyItem('training_book', 80)">Buy</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Customization Modal -->
    <div id="customizationModal" class="modal hidden">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold">üé® Customize Your Pet</h2>
                <button onclick="closeModal('customizationModal')" class="text-2xl">&times;</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">Pet Name</h3>
                    <input type="text" id="customPetName" class="w-full p-3 border rounded-lg" placeholder="Enter pet name">
                    
                    <h3 class="text-xl font-bold mb-4 mt-6">Pet Color</h3>
                    <div class="grid grid-cols-4 gap-3">
                        <button class="w-12 h-12 rounded-full bg-orange-500" onclick="changePetColor('orange')"></button>
                        <button class="w-12 h-12 rounded-full bg-gray-500" onclick="changePetColor('gray')"></button>
                        <button class="w-12 h-12 rounded-full bg-brown-500" onclick="changePetColor('brown')"></button>
                        <button class="w-12 h-12 rounded-full bg-black" onclick="changePetColor('black')"></button>
                        <button class="w-12 h-12 rounded-full bg-white border" onclick="changePetColor('white')"></button>
                        <button class="w-12 h-12 rounded-full bg-yellow-500" onclick="changePetColor('yellow')"></button>
                        <button class="w-12 h-12 rounded-full bg-pink-500" onclick="changePetColor('pink')"></button>
                        <button class="w-12 h-12 rounded-full bg-blue-500" onclick="changePetColor('blue')"></button>
                    </div>
                    
                    <h3 class="text-xl font-bold mb-4 mt-6">Environment</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <button class="action-btn" onclick="changeEnvironment('park')">üå≥ Park</button>
                        <button class="action-btn" onclick="changeEnvironment('beach')">üèñÔ∏è Beach</button>
                        <button class="action-btn" onclick="changeEnvironment('garden')">üå∫ Garden</button>
                        <button class="action-btn" onclick="changeEnvironment('space')">üöÄ Space</button>
                    </div>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">Accessories</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <button class="action-btn" onclick="toggleAccessory('hat')">üé© Hat</button>
                        <button class="action-btn" onclick="toggleAccessory('glasses')">üï∂Ô∏è Glasses</button>
                        <button class="action-btn" onclick="toggleAccessory('bow')">üéÄ Bow</button>
                        <button class="action-btn" onclick="toggleAccessory('collar')">üìø Collar</button>
                    </div>
                    
                    <div class="mt-8">
                        <button class="action-btn w-full" onclick="saveCustomization()">
                            <i class="fas fa-save mr-2"></i>Save Changes
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Achievements Modal -->
    <div id="achievementsModal" class="modal hidden">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold">üèÜ Achievements</h2>
                <button onclick="closeModal('achievementsModal')" class="text-2xl">&times;</button>
            </div>
            <div id="achievementsList" class="space-y-4">
                <!-- Achievements will be populated by JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- Memory Game Modal -->
    <div id="memoryGameModal" class="modal hidden">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold">üß† Memory Match Game</h2>
                <button onclick="closeModal('memoryGameModal')" class="text-2xl">&times;</button>
            </div>
            <div class="text-center mb-4">
                <p>Score: <span id="memoryScore">0</span> | Moves: <span id="memoryMoves">0</span></p>
            </div>
            <div class="game-grid" id="memoryGameGrid">
                <!-- Game cards will be generated by JavaScript -->
            </div>
            <div class="text-center mt-4">
                <button class="action-btn" onclick="resetMemoryGame()">Reset Game</button>
            </div>
        </div>
    </div>
    
    <!-- Catch Game Modal -->
    <div id="catchGameModal" class="modal hidden">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold">ü¶¥ Catch the Treat</h2>
                <button onclick="closeModal('catchGameModal')" class="text-2xl">&times;</button>
            </div>
            <div class="text-center mb-4">
                <p>Score: <span id="catchScore">0</span> | Lives: <span id="catchLives">3</span></p>
            </div>
            <div id="catchGameArea" style="height: 400px; background: #e2e8f0; border-radius: 10px; position: relative; overflow: hidden;">
                <div id="catcher" style="width: 60px; height: 60px; background: #667eea; border-radius: 50%; position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">üê±</div>
            </div>
            <div class="text-center mt-4">
                <button class="action-btn" id="startCatchBtn" onclick="startCatchGameplay()">Start Game</button>
                <button class="action-btn" onclick="resetCatchGame()">Reset</button>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            selectedPet: null,
            petStats: {
                health: 100,
                hunger: 80,
                happiness: 75,
                cleanliness: 90,
                energy: 85,
                intelligence: 60
            },
            petInfo: {
                name: 'Your Pet',
                type: 'cat',
                color: 'orange',
                age: 0,
                weight: 1.0,
                evolutionStage: 'baby',
                evolutionProgress: 10,
                accessories: [],
                environment: 'park'
            },
            gameData: {
                coins: 100,
                level: 1,
                experience: 0,
                achievements: ['first_pet'],
                inventory: [],
                totalPlayTime: 0
            },
            gameSettings: {
                isDay: true,
                weather: 'sunny',
                gameSpeed: 1
            }
        };
        
        // Pet Types Data
        const petTypes = {
            cat: { emoji: 'üê±', traits: ['Curious', 'Agile', 'Sleepy'], baseStats: { hunger: -2, happiness: +1, energy: -1 } },
            dog: { emoji: 'üêï', traits: ['Loyal', 'Energetic', 'Friendly'], baseStats: { hunger: -3, happiness: +2, energy: -2 } },
            bird: { emoji: 'ü¶ú', traits: ['Smart', 'Social', 'Musical'], baseStats: { intelligence: +2, happiness: +1, hunger: -1 } },
            fish: { emoji: 'üê†', traits: ['Peaceful', 'Graceful', 'Zen'], baseStats: { cleanliness: +1, happiness: +1, hunger: -1 } },
            hamster: { emoji: 'üêπ', traits: ['Tiny', 'Active', 'Cute'], baseStats: { energy: +1, happiness: +2, hunger: -2 } },
            rabbit: { emoji: 'üê∞', traits: ['Gentle', 'Quick', 'Soft'], baseStats: { happiness: +1, cleanliness: +1, hunger: -1 } }
        };
        
        // Achievement definitions
        const achievements = {
            first_pet: { name: 'First Pet', description: 'Adopted your first virtual pet!', icon: 'üêæ', unlocked: true },
            happy_pet: { name: 'Happy Pet', description: 'Keep happiness above 90% for 5 minutes', icon: 'üòä', unlocked: false },
            healthy_pet: { name: 'Healthy Pet', description: 'Maintain perfect health for 24 hours', icon: '‚ù§Ô∏è', unlocked: false },
            smart_pet: { name: 'Smart Pet', description: 'Raise intelligence to 100%', icon: 'üß†', unlocked: false },
            game_master: { name: 'Game Master', description: 'Win 10 mini-games', icon: 'üéÆ', unlocked: false },
            wealthy_owner: { name: 'Wealthy Owner', description: 'Accumulate 1000 coins', icon: 'üí∞', unlocked: false },
            pet_evolution: { name: 'Evolution Master', description: 'Evolve your pet to adult stage', icon: 'üåü', unlocked: false }
        };
        
        // Weather patterns
        const weatherPatterns = ['sunny', 'cloudy', 'rainy', 'snowy'];
        const weatherIcons = {
            sunny: '‚òÄÔ∏è',
            cloudy: '‚òÅÔ∏è',
            rainy: 'üåßÔ∏è',
            snowy: '‚ùÑÔ∏è'
        };
        
        // Initialize Game
        document.addEventListener('DOMContentLoaded', function() {
            loadGameState();
            initializeWeather();
            initializeDayNightCycle();
            startGameLoop();
            updateDisplay();
        });
        
        // Pet Selection
        function confirmPetSelection() {
            const selectedCard = document.querySelector('.pet-card.selected');
            if (!selectedCard) {
                showNotification('Please select a pet first!', 'warning');
                return;
            }
            
            gameState.selectedPet = selectedCard.dataset.pet;
            gameState.petInfo.type = gameState.selectedPet;
            gameState.petInfo.name = capitalizeFirst(gameState.selectedPet);
            
            document.getElementById('petSelectionScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            
            updatePetDisplay();
            initializeStatsChart();
            showNotification('Welcome to your new pet adventure!', 'success');
            unlockAchievement('first_pet');
        }
        
        // Pet card selection
        document.addEventListener('click', function(e) {
            if (e.target.closest('.pet-card')) {
                document.querySelectorAll('.pet-card').forEach(card => card.classList.remove('selected'));
                e.target.closest('.pet-card').classList.add('selected');
            }
        });
        
        // Pet Actions
        function feedPet() {
            if (gameState.petStats.hunger >= 95) {
                showNotification('Your pet is already full!', 'info');
                return;
            }
            
            gameState.petStats.hunger = Math.min(100, gameState.petStats.hunger + 25);
            gameState.petStats.happiness = Math.min(100, gameState.petStats.happiness + 5);
            addExperience(10);
            spendCoins(5);
            
            animatePet('happy');
            showFloatingText('‚ù§Ô∏è');
            showNotification('Your pet enjoyed the meal!', 'success');
            updateDisplay();
            saveGameState();
        }
        
        function cleanPet() {
            if (gameState.petStats.cleanliness >= 95) {
                showNotification('Your pet is already clean!', 'info');
                return;
            }
            
            gameState.petStats.cleanliness = Math.min(100, gameState.petStats.cleanliness + 30);
            gameState.petStats.happiness = Math.min(100, gameState.petStats.happiness + 10);
            addExperience(8);
            
            animatePet('happy');
            showFloatingText('‚ú®');
            showNotification('Your pet feels fresh and clean!', 'success');
            updateDisplay();
            saveGameState();
        }
        
        function playWithPet() {
            if (gameState.petStats.energy < 20) {
                showNotification('Your pet is too tired to play!', 'warning');
                return;
            }
            
            gameState.petStats.happiness = Math.min(100, gameState.petStats.happiness + 20);
            gameState.petStats.energy = Math.max(0, gameState.petStats.energy - 15);
            gameState.petStats.intelligence = Math.min(100, gameState.petStats.intelligence + 5);
            addExperience(15);
            
            animatePet('happy');
            showFloatingText('üéâ');
            showNotification('Your pet had a great time playing!', 'success');
            updateDisplay();
            saveGameState();
        }
        
        function putPetToSleep() {
            if (gameState.petStats.energy >= 95) {
                showNotification('Your pet is not tired!', 'info');
                return;
            }
            
            gameState.petStats.energy = Math.min(100, gameState.petStats.energy + 40);
            gameState.petStats.health = Math.min(100, gameState.petStats.health + 10);
            addExperience(5);
            
            animatePet('sleep');
            showFloatingText('üí§');
            showNotification('Your pet had a restful sleep!', 'success');
            updateDisplay();
            saveGameState();
        }
        
        function petPet() {
            gameState.petStats.happiness = Math.min(100, gameState.petStats.happiness + 3);
            addExperience(2);
            
            animatePet('happy');
            showFloatingText('‚ù§Ô∏è');
            updateDisplay();
        }
        
        // Pet Animation
        function animatePet(type) {
            const petSprite = document.getElementById('petSprite');
            petSprite.classList.remove('happy');
            
            if (type === 'happy') {
                petSprite.classList.add('happy');
                setTimeout(() => petSprite.classList.remove('happy'), 600);
            }
        }
        
        function showFloatingText(emoji) {
            const petContainer = document.querySelector('.pet-container');
            const floatingText = document.createElement('div');
            floatingText.className = 'floating-hearts';
            floatingText.textContent = emoji;
            floatingText.style.left = Math.random() * 200 + 100 + 'px';
            floatingText.style.top = '150px';
            
            petContainer.appendChild(floatingText);
            
            setTimeout(() => {
                if (petContainer.contains(floatingText)) {
                    petContainer.removeChild(floatingText);
                }
            }, 2000);
        }
        
        // Display Updates
        function updateDisplay() {
            updateStatusBars();
            updatePetDisplay();
            updateUI();
            updateMood();
            checkEvolution();
            checkAchievements();
        }
        
        function updateStatusBars() {
            const stats = ['health', 'hunger', 'happiness', 'cleanliness', 'energy', 'intelligence'];
            
            stats.forEach(stat => {
                const value = gameState.petStats[stat];
                const bar = document.getElementById(stat + 'Bar');
                const text = document.getElementById(stat + 'Text');
                
                if (bar && text) {
                    bar.style.width = value + '%';
                    text.textContent = Math.round(value) + '%';
                }
            });
            
            updateStatsChart();
        }
        
        function updatePetDisplay() {
            if (!gameState.selectedPet) return;
            
            const petSprite = document.getElementById('petSprite');
            const petName = document.getElementById('petName');
            const petType = document.getElementById('petType');
            const petAge = document.getElementById('petAge');
            const petWeight = document.getElementById('petWeight');
            const petColor = document.getElementById('petColor');
            const evolutionStage = document.getElementById('evolutionStage');
            const evolutionProgress = document.getElementById('evolutionProgress');
            
            if (petSprite) petSprite.textContent = petTypes[gameState.selectedPet].emoji;
            if (petName) petName.textContent = gameState.petInfo.name;
            if (petType) petType.textContent = capitalizeFirst(gameState.petInfo.type);
            if (petAge) petAge.textContent = gameState.petInfo.age + ' days';
            if (petWeight) petWeight.textContent = gameState.petInfo.weight.toFixed(1) + ' kg';
            if (petColor) petColor.textContent = capitalizeFirst(gameState.petInfo.color);
            if (evolutionStage) evolutionStage.textContent = capitalizeFirst(gameState.petInfo.evolutionStage);
            if (evolutionProgress) evolutionProgress.style.width = gameState.petInfo.evolutionProgress + '%';
        }
        
        function updateUI() {
            document.getElementById('coins').textContent = gameState.gameData.coins;
            document.getElementById('level').textContent = gameState.gameData.level;
            document.getElementById('experience').textContent = gameState.gameData.experience + '/100';
        }
        
        function updateMood() {
            const petMood = document.getElementById('petMood');
            const avgMood = (gameState.petStats.happiness + gameState.petStats.health + gameState.petStats.energy) / 3;
            
            let mood = 'Neutral';
            if (avgMood >= 80) mood = 'Very Happy';
            else if (avgMood >= 60) mood = 'Happy';
            else if (avgMood >= 40) mood = 'Okay';
            else if (avgMood >= 20) mood = 'Sad';
            else mood = 'Very Sad';
            
            if (petMood) petMood.textContent = 'Feeling ' + mood;
        }
        
        // Stats Chart
        function initializeStatsChart() {
            const ctx = document.getElementById('statsChart').getContext('2d');
            
            window.statsChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Health', 'Hunger', 'Happiness', 'Cleanliness', 'Energy', 'Intelligence'],
                    datasets: [{
                        label: 'Pet Stats',
                        data: [
                            gameState.petStats.health,
                            gameState.petStats.hunger,
                            gameState.petStats.happiness,
                            gameState.petStats.cleanliness,
                            gameState.petStats.energy,
                            gameState.petStats.intelligence
                        ],
                        backgroundColor: 'rgba(102, 126, 234, 0.2)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(102, 126, 234, 1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                stepSize: 20
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }
        
        function updateStatsChart() {
            if (window.statsChart) {
                window.statsChart.data.datasets[0].data = [
                    gameState.petStats.health,
                    gameState.petStats.hunger,
                    gameState.petStats.happiness,
                    gameState.petStats.cleanliness,
                    gameState.petStats.energy,
                    gameState.petStats.intelligence
                ];
                window.statsChart.update();
            }
        }
        
        // Shop System
        function openShop() {
            document.getElementById('shopModal').classList.remove('hidden');
        }
        
        function buyItem(itemId, cost) {
            if (gameState.gameData.coins < cost) {
                showNotification('Not enough coins!', 'warning');
                return;
            }
            
            gameState.gameData.coins -= cost;
            gameState.gameData.inventory.push(itemId);
            
            // Apply item effects
            switch(itemId) {
                case 'premium_food':
                    gameState.petStats.hunger = Math.min(100, gameState.petStats.hunger + 30);
                    break;
                case 'toy_bear':
                    gameState.petStats.happiness = Math.min(100, gameState.petStats.happiness + 20);
                    break;
                case 'health_potion':
                    gameState.petStats.health = Math.min(100, gameState.petStats.health + 50);
                    break;
                case 'training_book':
                    gameState.petStats.intelligence = Math.min(100, gameState.petStats.intelligence + 25);
                    break;
                case 'bow_tie':
                    gameState.petInfo.accessories.push('bow_tie');
                    break;
                case 'luxury_home':
                    gameState.petInfo.environment = 'luxury';
                    changeEnvironment('luxury');
                    break;
            }
            
            addExperience(5);
            updateDisplay();
            saveGameState();
            showNotification('Item purchased successfully!', 'success');
        }
        
        // Customization
        function openCustomization() {
            document.getElementById('customizationModal').classList.remove('hidden');
            document.getElementById('customPetName').value = gameState.petInfo.name;
        }
        
        function saveCustomization() {
            const newName = document.getElementById('customPetName').value.trim();
            if (newName) {
                gameState.petInfo.name = newName;
                updateDisplay();
                saveGameState();
                showNotification('Pet customized successfully!', 'success');
                closeModal('customizationModal');
            }
        }
        
        function changePetColor(color) {
            gameState.petInfo.color = color;
            updateDisplay();
        }
        
        function changeEnvironment(env) {
            gameState.petInfo.environment = env;
            const envBg = document.getElementById('environmentBg');
            
            const environments = {
                park: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                beach: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                garden: 'linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%)',
                space: 'linear-gradient(135deg, #2c3e50 0%, #3498db 100%)',
                luxury: 'linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%)'
            };
            
            if (envBg) {
                envBg.style.background = environments[env] || environments.park;
            }
        }
        
        function toggleAccessory(accessory) {
            const index = gameState.petInfo.accessories.indexOf(accessory);
            if (index > -1) {
                gameState.petInfo.accessories.splice(index, 1);
            } else {
                gameState.petInfo.accessories.push(accessory);
            }
        }
        
        // Achievements
        function openAchievements() {
            document.getElementById('achievementsModal').classList.remove('hidden');
            displayAchievements();
        }
        
        function displayAchievements() {
            const achievementsList = document.getElementById('achievementsList');
            achievementsList.innerHTML = '';
            
            Object.keys(achievements).forEach(key => {
                const achievement = achievements[key];
                const isUnlocked = gameState.gameData.achievements.includes(key);
                
                const achievementDiv = document.createElement('div');
                achievementDiv.className = `achievement ${isUnlocked ? '' : 'opacity-50'}`;
                achievementDiv.innerHTML = `
                    <div class="flex items-center">
                        <div class="text-2xl mr-3">${achievement.icon}</div>
                        <div>
                            <h4 class="font-bold">${achievement.name}</h4>
                            <p class="text-sm">${achievement.description}</p>
                            ${isUnlocked ? '<span class="text-green-600 text-sm">‚úÖ Unlocked</span>' : '<span class="text-gray-500 text-sm">üîí Locked</span>'}
                        </div>
                    </div>
                `;
                achievementsList.appendChild(achievementDiv);
            });
        }
        
        function unlockAchievement(achievementId) {
            if (!gameState.gameData.achievements.includes(achievementId)) {
                gameState.gameData.achievements.push(achievementId);
                const achievement = achievements[achievementId];
                showNotification(`Achievement Unlocked: ${achievement.name}!`, 'success');
                earnCoins(50);
                saveGameState();
            }
        }
        
        function checkAchievements() {
            // Check various achievement conditions
            if (gameState.petStats.happiness >= 90 && !gameState.gameData.achievements.includes('happy_pet')) {
                unlockAchievement('happy_pet');
            }
            
            if (gameState.petStats.health === 100 && !gameState.gameData.achievements.includes('healthy_pet')) {
                unlockAchievement('healthy_pet');
            }
            
            if (gameState.petStats.intelligence === 100 && !gameState.gameData.achievements.includes('smart_pet')) {
                unlockAchievement('smart_pet');
            }
            
            if (gameState.gameData.coins >= 1000 && !gameState.gameData.achievements.includes('wealthy_owner')) {
                unlockAchievement('wealthy_owner');
            }
            
            if (gameState.petInfo.evolutionStage === 'adult' && !gameState.gameData.achievements.includes('pet_evolution')) {
                unlockAchievement('pet_evolution');
            }
        }
        
        // Evolution System
        function checkEvolution() {
            const currentStage = gameState.petInfo.evolutionStage;
            let newStage = currentStage;
            
            if (gameState.petInfo.age >= 30 && currentStage === 'baby') {
                newStage = 'child';
                gameState.petInfo.evolutionProgress = 0;
            } else if (gameState.petInfo.age >= 60 && currentStage === 'child') {
                newStage = 'teen';
                gameState.petInfo.evolutionProgress = 0;
            } else if (gameState.petInfo.age >= 100 && currentStage === 'teen') {
                newStage = 'adult';
                gameState.petInfo.evolutionProgress = 100;
            }
            
            if (newStage !== currentStage) {
                gameState.petInfo.evolutionStage = newStage;
                showNotification(`Your pet evolved to ${newStage} stage!`, 'success');
                earnCoins(100);
                addExperience(50);
            } else {
                // Update evolution progress
                const progressPerDay = 100 / 30; // 30 days per stage
                gameState.petInfo.evolutionProgress = Math.min(100, (gameState.petInfo.age % 30) * progressPerDay);
            }
        }
        
        // Mini Games
        function startMemoryGame() {
            document.getElementById('memoryGameModal').classList.remove('hidden');
            initializeMemoryGame();
        }
        
        function initializeMemoryGame() {
            const gameGrid = document.getElementById('memoryGameGrid');
            const emojis = ['üê±', 'üêï', 'üê¶', 'üê†', 'üêπ', 'üê∞', 'ü¶ä', 'üê∏'];
            const gameCards = [...emojis, ...emojis].sort(() => Math.random() - 0.5);
            
            gameGrid.innerHTML = '';
            gameState.memoryGame = {
                score: 0,
                moves: 0,
                flippedCards: [],
                matchedPairs: 0
            };
            
            gameCards.forEach((emoji, index) => {
                const card = document.createElement('div');
                card.className = 'game-card';
                card.dataset.emoji = emoji;
                card.dataset.index = index;
                card.textContent = '?';
                card.onclick = () => flipMemoryCard(card);
                gameGrid.appendChild(card);
            });
            
            updateMemoryGameUI();
        }
        
        function flipMemoryCard(card) {
            if (card.classList.contains('matched') || gameState.memoryGame.flippedCards.length >= 2) {
                return;
            }
            
            card.textContent = card.dataset.emoji;
            card.style.background = '#4ecdc4';
            gameState.memoryGame.flippedCards.push(card);
            
            if (gameState.memoryGame.flippedCards.length === 2) {
                gameState.memoryGame.moves++;
                updateMemoryGameUI();
                
                setTimeout(() => {
                    checkMemoryMatch();
                }, 1000);
            }
        }
        
        function checkMemoryMatch() {
            const [card1, card2] = gameState.memoryGame.flippedCards;
            
            if (card1.dataset.emoji === card2.dataset.emoji) {
                card1.classList.add('matched');
                card2.classList.add('matched');
                gameState.memoryGame.score += 10;
                gameState.memoryGame.matchedPairs++;
                
                if (gameState.memoryGame.matchedPairs === 8) {
                    showNotification('Congratulations! You won the memory game!', 'success');
                    earnCoins(50);
                    addExperience(25);
                    gameState.petStats.intelligence = Math.min(100, gameState.petStats.intelligence + 10);
                    updateDisplay();
                }
            } else {
                card1.textContent = '?';
                card2.textContent = '?';
                card1.style.background = '#f8f9fa';
                card2.style.background = '#f8f9fa';
            }
            
            gameState.memoryGame.flippedCards = [];
            updateMemoryGameUI();
        }
        
        function updateMemoryGameUI() {
            document.getElementById('memoryScore').textContent = gameState.memoryGame.score;
            document.getElementById('memoryMoves').textContent = gameState.memoryGame.moves;
        }
        
        function resetMemoryGame() {
            initializeMemoryGame();
        }
        
        // Catch Game
        function startCatchGame() {
            document.getElementById('catchGameModal').classList.remove('hidden');
            initializeCatchGame();
        }
        
        function initializeCatchGame() {
            gameState.catchGame = {
                score: 0,
                lives: 3,
                isPlaying: false,
                catcherPosition: 50,
                fallingItems: []
            };
            updateCatchGameUI();
        }
        
        function startCatchGameplay() {
            if (gameState.catchGame.isPlaying) return;
            
            gameState.catchGame.isPlaying = true;
            document.getElementById('startCatchBtn').textContent = 'Playing...';
            document.getElementById('startCatchBtn').disabled = true;
            
            // Start spawning falling items
            gameState.catchGame.spawnInterval = setInterval(spawnFallingItem, 1500);
            
            // Game duration: 30 seconds
            setTimeout(() => {
                endCatchGame();
            }, 30000);
            
            // Set up catcher movement
            setupCatcherControls();
        }
        
        function setupCatcherControls() {
            const gameArea = document.getElementById('catchGameArea');
            const catcher = document.getElementById('catcher');
            
            gameArea.addEventListener('mousemove', (e) => {
                if (!gameState.catchGame.isPlaying) return;
                
                const rect = gameArea.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const percentage = Math.max(0, Math.min(100, (x / rect.width) * 100));
                
                gameState.catchGame.catcherPosition = percentage;
                catcher.style.left = percentage + '%';
            });
        }
        
        function spawnFallingItem() {
            const gameArea = document.getElementById('catchGameArea');
            const item = document.createElement('div');
            const treats = ['ü¶¥', 'üêü', 'ü•ï', 'üßÄ'];
            
            item.textContent = treats[Math.floor(Math.random() * treats.length)];
            item.style.position = 'absolute';
            item.style.fontSize = '24px';
            item.style.left = Math.random() * 90 + '%';
            item.style.top = '0px';
            item.style.transition = 'top 3s linear';
            
            gameArea.appendChild(item);
            
            // Animate falling
            setTimeout(() => {
                item.style.top = '370px';
            }, 10);
            
            // Check for catch or miss
            setTimeout(() => {
                checkCatch(item);
            }, 3000);
        }
        
        function checkCatch(item) {
            const itemRect = item.getBoundingClientRect();
            const catcherRect = document.getElementById('catcher').getBoundingClientRect();
            
            const caught = itemRect.left < catcherRect.right && 
                          itemRect.right > catcherRect.left && 
                          itemRect.bottom > catcherRect.top;
            
            if (caught) {
                gameState.catchGame.score += 10;
                showNotification('Caught!', 'success');
            } else {
                gameState.catchGame.lives--;
                if (gameState.catchGame.lives <= 0) {
                    endCatchGame();
                }
            }
            
            if (item.parentNode) {
                item.parentNode.removeChild(item);
            }
            
            updateCatchGameUI();
        }
        
        function endCatchGame() {
            gameState.catchGame.isPlaying = false;
            clearInterval(gameState.catchGame.spawnInterval);
            
            document.getElementById('startCatchBtn').textContent = 'Start Game';
            document.getElementById('startCatchBtn').disabled = false;
            
            // Clear remaining items
            const gameArea = document.getElementById('catchGameArea');
            const items = gameArea.querySelectorAll('div:not(#catcher)');
            items.forEach(item => item.remove());
            
            // Reward player
            const reward = gameState.catchGame.score;
            earnCoins(reward);
            addExperience(reward);
            gameState.petStats.happiness = Math.min(100, gameState.petStats.happiness + 15);
            
            showNotification(`Game over! You earned ${reward} coins!`, 'success');
            updateDisplay();
        }
        
        function updateCatchGameUI() {
            document.getElementById('catchScore').textContent = gameState.catchGame.score;
            document.getElementById('catchLives').textContent = gameState.catchGame.lives;
        }
        
        function resetCatchGame() {
            if (gameState.catchGame.isPlaying) {
                endCatchGame();
            }
            initializeCatchGame();
        }
        
        // Puzzle Game (simplified version)
        function startPuzzleGame() {
            const puzzles = [
                "What animal says 'meow'?",
                "What do dogs like to play with?",
                "What do fish live in?",
                "What do cats like to chase?"
            ];
            
            const answers = ['cat', 'ball', 'water', 'mouse'];
            const randomIndex = Math.floor(Math.random() * puzzles.length);
            
            const userAnswer = prompt(puzzles[randomIndex]);
            
            if (userAnswer && userAnswer.toLowerCase().includes(answers[randomIndex])) {
                showNotification('Correct! Your pet learned something new!', 'success');
                gameState.petStats.intelligence = Math.min(100, gameState.petStats.intelligence + 15);
                gameState.petStats.happiness = Math.min(100, gameState.petStats.happiness + 10);
                earnCoins(30);
                addExperience(20);
            } else {
                showNotification('Not quite right, but your pet had fun trying!', 'info');
                gameState.petStats.happiness = Math.min(100, gameState.petStats.happiness + 5);
                earnCoins(10);
                addExperience(5);
            }
            
            updateDisplay();
        }
        
        // Vet and Training
        function visitVet() {
            if (gameState.gameData.coins < 30) {
                showNotification('Vet visit costs 30 coins!', 'warning');
                return;
            }
            
            spendCoins(30);
            gameState.petStats.health = 100;
            gameState.petStats.happiness = Math.min(100, gameState.petStats.happiness + 15);
            addExperience(20);
            
            showNotification('Your pet got a thorough health checkup!', 'success');
            updateDisplay();
        }
        
        function trainPet() {
            if (gameState.petStats.energy < 30) {
                showNotification('Your pet is too tired to train!', 'warning');
                return;
            }
            
            if (gameState.gameData.coins < 20) {
                showNotification('Training costs 20 coins!', 'warning');
                return;
            }
            
            spendCoins(20);
            gameState.petStats.energy = Math.max(0, gameState.petStats.energy - 25);
            gameState.petStats.intelligence = Math.min(100, gameState.petStats.intelligence + 20);
            gameState.petStats.happiness = Math.min(100, gameState.petStats.happiness + 10);
            addExperience(25);
            
            showNotification('Training session completed! Your pet is smarter!', 'success');
            updateDisplay();
        }
        
        // Game Loop and Time Management
        function startGameLoop() {
            setInterval(() => {
                if (gameState.selectedPet) {
                    updatePetNeeds();
                    ageUp();
                    updateWeather();
                    saveGameState();
                }
            }, 10000); // Update every 10 seconds
        }
        
        function updatePetNeeds() {
            // Gradual decrease of stats over time (realistic pet care)
            const petType = petTypes[gameState.selectedPet];
            if (petType) {
                gameState.petStats.hunger = Math.max(0, gameState.petStats.hunger + (petType.baseStats.hunger || -1));
                gameState.petStats.happiness = Math.max(0, gameState.petStats.happiness + (petType.baseStats.happiness || -0.5));
                gameState.petStats.energy = Math.max(0, gameState.petStats.energy + (petType.baseStats.energy || -0.5));
                gameState.petStats.cleanliness = Math.max(0, gameState.petStats.cleanliness - 0.3);
                
                // Health is affected by other stats
                const avgCare = (gameState.petStats.hunger + gameState.petStats.happiness + gameState.petStats.cleanliness) / 3;
                if (avgCare < 30) {
                    gameState.petStats.health = Math.max(0, gameState.petStats.health - 1);
                } else if (avgCare > 80) {
                    gameState.petStats.health = Math.min(100, gameState.petStats.health + 0.5);
                }
            }
            
            updateDisplay();
        }
        
        function ageUp() {
            gameState.petInfo.age += 0.1; // Age in game hours
            gameState.petInfo.weight += 0.001; // Weight gain
            gameState.gameData.totalPlayTime += 10; // seconds
        }
        
        // Weather and Day/Night System
        function initializeWeather() {
            gameState.gameSettings.weather = weatherPatterns[Math.floor(Math.random() * weatherPatterns.length)];
            updateWeatherDisplay();
        }
        
        function updateWeather() {
            if (Math.random() < 0.1) { // 10% chance to change weather
                gameState.gameSettings.weather = weatherPatterns[Math.floor(Math.random() * weatherPatterns.length)];
                updateWeatherDisplay();
            }
        }
        
        function updateWeatherDisplay() {
            const weatherWidget = document.getElementById('weatherWidget');
            const icon = weatherIcons[gameState.gameSettings.weather];
            const name = gameState.gameSettings.weather.charAt(0).toUpperCase() + gameState.gameSettings.weather.slice(1);
            
            if (weatherWidget) {
                weatherWidget.innerHTML = `<span class="text-2xl">${icon}</span><span class="ml-2">${name}</span>`;
            }
        }
        
        function initializeDayNightCycle() {
            setInterval(() => {
                gameState.gameSettings.isDay = !gameState.gameSettings.isDay;
                const cycle = document.getElementById('dayNightCycle');
                cycle.className = `day-night-cycle ${gameState.gameSettings.isDay ? 'day' : 'night'}`;
            }, 60000); // Change every minute for demo purposes
        }
        
        // Utility Functions
        function addExperience(amount) {
            gameState.gameData.experience += amount;
            if (gameState.gameData.experience >= 100) {
                gameState.gameData.level++;
                gameState.gameData.experience = 0;
                earnCoins(gameState.gameData.level * 10);
                showNotification(`Level up! You are now level ${gameState.gameData.level}!`, 'success');
            }
        }
        
        function earnCoins(amount) {
            gameState.gameData.coins += amount;
        }
        
        function spendCoins(amount) {
            gameState.gameData.coins = Math.max(0, gameState.gameData.coins - amount);
        }
        
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification bg-${type === 'success' ? 'green' : type === 'warning' ? 'yellow' : type === 'error' ? 'red' : 'blue'}-500`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (document.body.contains(notification)) {
                    document.body.removeChild(notification);
                }
            }, 3000);
        }
        
        function capitalizeFirst(str) {
            return str.charAt(0).toUpperCase() + str.slice(1);
        }
        
        // Modal Management
        function closeModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
        }
        
        // Save/Load Game State
        function saveGameState() {
            localStorage.setItem('virtualPetGame', JSON.stringify(gameState));
        }
        
        function loadGameState() {
            const saved = localStorage.getItem('virtualPetGame');
            if (saved) {
                try {
                    const loadedState = JSON.parse(saved);
                    gameState = { ...gameState, ...loadedState };
                    
                    if (gameState.selectedPet) {
                        document.getElementById('petSelectionScreen').classList.add('hidden');
                        document.getElementById('gameScreen').classList.remove('hidden');
                        updateDisplay();
                        setTimeout(() => {
                            initializeStatsChart();
                        }, 100);
                    }
                } catch (e) {
                    console.log('Could not load saved game');
                }
            }
        }
        
        // Click outside modal to close
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.add('hidden');
            }
        });
        
        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.classList.add('hidden');
                });
            }
        });
        
        // Welcome message
        setTimeout(() => {
            showNotification('Welcome to Virtual Pet Paradise! Choose your pet to start your journey!', 'success');
        }, 1000);
    </script>
</body>
</html>
