<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PetVerse - The Ultimate Virtual Pet Universe</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Poppins', sans-serif;
        }
        
        .pet-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .pet-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .pet-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            margin: 0 auto;
            animation: petPulse 2s infinite;
        }
        
        @keyframes petPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .status-bar {
            height: 20px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .status-fill {
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }
        
        .navigation-tab {
            padding: 12px 20px;
            margin: 4px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .navigation-tab:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .navigation-tab.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }
        
        .room-tile {
            width: 100px;
            height: 100px;
            border: 2px dashed #cbd5e0;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .room-tile:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }
        
        .furniture-item {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s ease;
            background: linear-gradient(45deg, #ffecd2, #fcb69f);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }
        
        .furniture-item:hover {
            transform: scale(1.1);
        }
        
        .mini-game-card {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            border-radius: 16px;
            padding: 20px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .mini-game-card:hover {
            transform: translateY(-5px);
        }
        
        .achievement-badge {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #8b5000;
        }
        
        .weather-widget {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            border-radius: 12px;
            padding: 16px;
            color: white;
            text-align: center;
        }
        
        .pet-mood {
            font-size: 2rem;
            animation: moodBounce 1.5s infinite;
        }
        
        @keyframes moodBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .floating-hearts {
            position: absolute;
            color: #ff6b6b;
            font-size: 1.5rem;
            animation: floatUp 2s ease-out forwards;
            pointer-events: none;
        }
        
        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-50px); }
        }
        
        .experience-bar {
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .experience-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.5s ease;
        }
        
        .coin-animation {
            animation: coinFlip 0.6s ease;
        }
        
        @keyframes coinFlip {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(180deg); }
            100% { transform: rotateY(360deg); }
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 12px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .breeding-animation {
            animation: heartPulse 1s infinite;
        }
        
        @keyframes heartPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .day-night-cycle {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            transition: background 2s ease;
        }
        
        .day {
            background: linear-gradient(to bottom, #87CEEB, #98FB98);
        }
        
        .night {
            background: linear-gradient(to bottom, #191970, #4B0082);
        }
        
        .weather-effect {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .rain {
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><line x1="10" y1="0" x2="5" y2="20" stroke="blue" stroke-width="1" opacity="0.7"/><line x1="30" y1="0" x2="25" y2="20" stroke="blue" stroke-width="1" opacity="0.7"/><line x1="50" y1="0" x2="45" y2="20" stroke="blue" stroke-width="1" opacity="0.7"/><line x1="70" y1="0" x2="65" y2="20" stroke="blue" stroke-width="1" opacity="0.7"/><line x1="90" y1="0" x2="85" y2="20" stroke="blue" stroke-width="1" opacity="0.7"/></svg>') repeat;
            animation: rainFall 1s linear infinite;
        }
        
        @keyframes rainFall {
            0% { transform: translateY(-100px); }
            100% { transform: translateY(100vh); }
        }
        
        .pet-physics {
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .social-notification {
            background: linear-gradient(45deg, #ff9a9e, #fecfef);
            border-radius: 8px;
            padding: 8px 12px;
            margin: 4px 0;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .loading-spinner {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="pet-container">
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center p-4">
        <div class="pet-card w-full max-w-md p-8">
            <div class="text-center mb-8">
                <div class="text-6xl mb-4">üêæ</div>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">PetVerse</h1>
                <p class="text-gray-600">The Ultimate Virtual Pet Universe</p>
            </div>
            
            <div id="loginForm">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">
                        <i class="fas fa-user mr-2"></i>Username
                    </label>
                    <input type="text" id="loginUsername" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" placeholder="Enter username">
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">
                        <i class="fas fa-lock mr-2"></i>Password
                    </label>
                    <input type="password" id="loginPassword" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" placeholder="Enter password">
                </div>
                <button onclick="login()" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-4 rounded-lg hover:from-blue-600 hover:to-purple-700 transition duration-300 mb-4">
                    <i class="fas fa-sign-in-alt mr-2"></i>Login
                </button>
                <button onclick="showRegister()" class="w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 transition duration-300">
                    Create New Account
                </button>
            </div>
            
            <div id="registerForm" style="display: none;">
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">
                        <i class="fas fa-user mr-2"></i>Username
                    </label>
                    <input type="text" id="registerUsername" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" placeholder="Choose username">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">
                        <i class="fas fa-envelope mr-2"></i>Email
                    </label>
                    <input type="email" id="registerEmail" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" placeholder="Enter email">
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">
                        <i class="fas fa-lock mr-2"></i>Password
                    </label>
                    <input type="password" id="registerPassword" class="w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500" placeholder="Create password">
                </div>
                <button onclick="register()" class="w-full bg-gradient-to-r from-green-500 to-blue-600 text-white py-2 px-4 rounded-lg hover:from-green-600 hover:to-blue-700 transition duration-300 mb-4">
                    <i class="fas fa-user-plus mr-2"></i>Create Account
                </button>
                <button onclick="showLogin()" class="w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 transition duration-300">
                    Back to Login
                </button>
            </div>
        </div>
    </div>

    <!-- Main Game Interface -->
    <div id="gameScreen" style="display: none;" class="min-h-screen">
        <!-- Day/Night Cycle Background -->
        <div id="dayNightCycle" class="day-night-cycle day"></div>
        
        <!-- Weather Effects -->
        <div id="weatherEffect" class="weather-effect"></div>
        
        <!-- Header -->
        <header class="relative z-10 p-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <h1 class="text-2xl font-bold">PetVerse</h1>
                    <div class="weather-widget">
                        <div id="currentWeather" class="flex items-center space-x-2">
                            <i class="fas fa-sun"></i>
                            <span id="weatherText">Sunny</span>
                            <span id="temperature">72¬∞F</span>
                        </div>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-coins text-yellow-400"></i>
                        <span id="userCoins" class="coin-animation">1000</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-trophy text-yellow-400"></i>
                        <span id="userLevel">1</span>
                    </div>
                    <button onclick="logout()" class="bg-red-500 hover:bg-red-600 px-3 py-1 rounded-lg transition duration-300">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="relative z-10 bg-white bg-opacity-90 p-4 shadow-lg">
            <div class="flex space-x-2 overflow-x-auto">
                <div class="navigation-tab active" onclick="showSection('home')">
                    <i class="fas fa-home mr-2"></i>Home
                </div>
                <div class="navigation-tab" onclick="showSection('pets')">
                    <i class="fas fa-paw mr-2"></i>My Pets
                </div>
                <div class="navigation-tab" onclick="showSection('house')">
                    <i class="fas fa-house-user mr-2"></i>Pet House
                </div>
                <div class="navigation-tab" onclick="showSection('explore')">
                    <i class="fas fa-map mr-2"></i>Explore
                </div>
                <div class="navigation-tab" onclick="showSection('games')">
                    <i class="fas fa-gamepad mr-2"></i>Mini Games
                </div>
                <div class="navigation-tab" onclick="showSection('social')">
                    <i class="fas fa-users mr-2"></i>Social
                </div>
                <div class="navigation-tab" onclick="showSection('shop')">
                    <i class="fas fa-shopping-cart mr-2"></i>Shop
                </div>
                <div class="navigation-tab" onclick="showSection('achievements')">
                    <i class="fas fa-trophy mr-2"></i>Achievements
                </div>
                <div class="navigation-tab" onclick="showSection('breeding')">
                    <i class="fas fa-heart mr-2"></i>Breeding
                </div>
                <div class="navigation-tab" onclick="showSection('stats')">
                    <i class="fas fa-chart-bar mr-2"></i>Statistics
                </div>
            </div>
        </nav>

        <!-- Main Content Container -->
        <main class="relative z-10 p-4">
            <!-- Home Section -->
            <div id="homeSection" class="section">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Current Pet Display -->
                    <div class="pet-card p-6 col-span-full lg:col-span-2">
                        <div class="text-center">
                            <div id="currentPetAvatar" class="pet-avatar mx-auto mb-4">
                                üê±
                            </div>
                            <h2 id="currentPetName" class="text-2xl font-bold mb-2">Whiskers</h2>
                            <div id="currentPetMood" class="pet-mood mb-4">üòä</div>
                            <p id="currentPetAge" class="text-gray-600 mb-4">Age: 3 months</p>
                            
                            <!-- Pet Status Bars -->
                            <div class="space-y-3">
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span>Health</span>
                                        <span id="healthValue">85/100</span>
                                    </div>
                                    <div class="status-bar">
                                        <div id="healthBar" class="status-fill bg-green-500" style="width: 85%"></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span>Hunger</span>
                                        <span id="hungerValue">60/100</span>
                                    </div>
                                    <div class="status-bar">
                                        <div id="hungerBar" class="status-fill bg-orange-500" style="width: 60%"></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span>Happiness</span>
                                        <span id="happinessValue">75/100</span>
                                    </div>
                                    <div class="status-bar">
                                        <div id="happinessBar" class="status-fill bg-pink-500" style="width: 75%"></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span>Energy</span>
                                        <span id="energyValue">90/100</span>
                                    </div>
                                    <div class="status-bar">
                                        <div id="energyBar" class="status-fill bg-blue-500" style="width: 90%"></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span>Cleanliness</span>
                                        <span id="cleanlinessValue">70/100</span>
                                    </div>
                                    <div class="status-bar">
                                        <div id="cleanlinessBar" class="status-fill bg-cyan-500" style="width: 70%"></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div class="flex justify-between text-sm mb-1">
                                        <span>Experience</span>
                                        <span id="experienceValue">150/200</span>
                                    </div>
                                    <div class="experience-bar">
                                        <div id="experienceBar" class="experience-fill" style="width: 75%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="pet-card p-6">
                        <h3 class="text-xl font-bold mb-4">Quick Actions</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <button onclick="feedPet()" class="bg-orange-500 hover:bg-orange-600 text-white p-3 rounded-lg transition duration-300">
                                <i class="fas fa-utensils mb-2 block text-xl"></i>
                                Feed
                            </button>
                            <button onclick="playWithPet()" class="bg-green-500 hover:bg-green-600 text-white p-3 rounded-lg transition duration-300">
                                <i class="fas fa-gamepad mb-2 block text-xl"></i>
                                Play
                            </button>
                            <button onclick="cleanPet()" class="bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-lg transition duration-300">
                                <i class="fas fa-shower mb-2 block text-xl"></i>
                                Clean
                            </button>
                            <button onclick="sleepPet()" class="bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-lg transition duration-300">
                                <i class="fas fa-bed mb-2 block text-xl"></i>
                                Sleep
                            </button>
                        </div>
                        
                        <div class="mt-6">
                            <button onclick="takeToVet()" class="w-full bg-red-500 hover:bg-red-600 text-white p-3 rounded-lg transition duration-300">
                                <i class="fas fa-user-md mr-2"></i>Visit Veterinarian
                            </button>
                        </div>
                    </div>
                    
                    <!-- Daily Tasks -->
                    <div class="pet-card p-6 col-span-full">
                        <h3 class="text-xl font-bold mb-4">Daily Tasks</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-gradient-to-r from-green-400 to-green-600 p-4 rounded-lg text-white">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h4 class="font-semibold">Feed 3 times</h4>
                                        <p class="text-sm opacity-80">Progress: 2/3</p>
                                    </div>
                                    <i class="fas fa-utensils text-2xl"></i>
                                </div>
                            </div>
                            <div class="bg-gradient-to-r from-blue-400 to-blue-600 p-4 rounded-lg text-white">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h4 class="font-semibold">Play for 10 minutes</h4>
                                        <p class="text-sm opacity-80">Progress: 7/10 min</p>
                                    </div>
                                    <i class="fas fa-gamepad text-2xl"></i>
                                </div>
                            </div>
                            <div class="bg-gradient-to-r from-purple-400 to-purple-600 p-4 rounded-lg text-white">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h4 class="font-semibold">Learn new trick</h4>
                                        <p class="text-sm opacity-80">Progress: 0/1</p>
                                    </div>
                                    <i class="fas fa-graduation-cap text-2xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pets Section -->
            <div id="petsSection" class="section" style="display: none;">
                <div class="mb-6">
                    <div class="flex justify-between items-center">
                        <h2 class="text-2xl font-bold">My Pet Collection</h2>
                        <button onclick="adoptNewPet()" class="bg-gradient-to-r from-green-500 to-blue-600 text-white px-6 py-2 rounded-lg hover:from-green-600 hover:to-blue-700 transition duration-300">
                            <i class="fas fa-plus mr-2"></i>Adopt New Pet
                        </button>
                    </div>
                </div>
                
                <div id="petCollection" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Pet cards will be dynamically generated -->
                </div>
            </div>

            <!-- Pet House Section -->
            <div id="houseSection" class="section" style="display: none;">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold mb-4">Pet House Designer</h2>
                    <div class="flex space-x-4 mb-4">
                        <button onclick="switchRoom('bedroom')" class="navigation-tab" data-room="bedroom">
                            <i class="fas fa-bed mr-2"></i>Bedroom
                        </button>
                        <button onclick="switchRoom('kitchen')" class="navigation-tab" data-room="kitchen">
                            <i class="fas fa-utensils mr-2"></i>Kitchen
                        </button>
                        <button onclick="switchRoom('garden')" class="navigation-tab" data-room="garden">
                            <i class="fas fa-seedling mr-2"></i>Garden
                        </button>
                        <button onclick="switchRoom('playroom')" class="navigation-tab active" data-room="playroom">
                            <i class="fas fa-gamepad mr-2"></i>Playroom
                        </button>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                    <!-- Room Layout -->
                    <div class="lg:col-span-3">
                        <div class="pet-card p-6">
                            <h3 class="text-lg font-bold mb-4" id="currentRoomTitle">Playroom</h3>
                            <div id="roomLayout" class="grid grid-cols-5 gap-2 mb-4" style="min-height: 400px;">
                                <!-- Room tiles will be generated dynamically -->
                            </div>
                            <div class="flex justify-between">
                                <button onclick="saveRoomLayout()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg transition duration-300">
                                    <i class="fas fa-save mr-2"></i>Save Layout
                                </button>
                                <button onclick="clearRoom()" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition duration-300">
                                    <i class="fas fa-trash mr-2"></i>Clear Room
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Furniture Inventory -->
                    <div class="pet-card p-6">
                        <h3 class="text-lg font-bold mb-4">Furniture</h3>
                        <div id="furnitureInventory" class="grid grid-cols-2 gap-2">
                            <!-- Furniture items will be generated dynamically -->
                        </div>
                        <button onclick="buyFurniture()" class="w-full mt-4 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition duration-300">
                            <i class="fas fa-shopping-cart mr-2"></i>Buy Furniture
                        </button>
                    </div>
                </div>
            </div>

            <!-- Explore Section -->
            <div id="exploreSection" class="section" style="display: none;">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold mb-4">Explore the World</h2>
                    <p class="text-gray-600">Take your pet on adventures to different locations!</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="mini-game-card" onclick="exploreLocation('park')">
                        <div class="text-center">
                            <div class="text-4xl mb-2">üèûÔ∏è</div>
                            <h3 class="text-lg font-bold">City Park</h3>
                            <p class="text-sm opacity-80">Meet other pets and play fetch</p>
                        </div>
                    </div>
                    
                    <div class="mini-game-card" onclick="exploreLocation('beach')">
                        <div class="text-center">
                            <div class="text-4xl mb-2">üèñÔ∏è</div>
                            <h3 class="text-lg font-bold">Sunny Beach</h3>
                            <p class="text-sm opacity-80">Dig for treasures and swim</p>
                        </div>
                    </div>
                    
                    <div class="mini-game-card" onclick="exploreLocation('forest')">
                        <div class="text-center">
                            <div class="text-4xl mb-2">üå≤</div>
                            <h3 class="text-lg font-bold">Mystery Forest</h3>
                            <p class="text-sm opacity-80">Hunt for rare items and berries</p>
                        </div>
                    </div>
                    
                    <div class="mini-game-card" onclick="exploreLocation('city')">
                        <div class="text-center">
                            <div class="text-4xl mb-2">üèôÔ∏è</div>
                            <h3 class="text-lg font-bold">Downtown</h3>
                            <p class="text-sm opacity-80">Shop and socialize</p>
                        </div>
                    </div>
                </div>
                
                <!-- Current Exploration -->
                <div id="explorationArea" class="mt-8 pet-card p-6" style="display: none;">
                    <div class="text-center">
                        <div id="explorationIcon" class="text-6xl mb-4">üèûÔ∏è</div>
                        <h3 id="explorationTitle" class="text-2xl font-bold mb-4">Exploring City Park</h3>
                        <div id="explorationContent">
                            <div class="loading-spinner"></div>
                            <p>Your pet is exploring...</p>
                        </div>
                        <button onclick="finishExploration()" class="mt-4 bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition duration-300">
                            Return Home
                        </button>
                    </div>
                </div>
            </div>

            <!-- Mini Games Section -->
            <div id="gamesSection" class="section" style="display: none;">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold mb-4">Mini Games</h2>
                    <p class="text-gray-600">Play fun games with your pet to increase happiness and earn rewards!</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="mini-game-card" onclick="playGame('memory')">
                        <div class="text-center">
                            <div class="text-4xl mb-2">üß†</div>
                            <h3 class="text-lg font-bold">Memory Match</h3>
                            <p class="text-sm opacity-80">Test your memory skills</p>
                            <div class="mt-2">
                                <span class="bg-yellow-400 text-yellow-900 px-2 py-1 rounded text-xs">+10 Coins</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mini-game-card" onclick="playGame('catch')">
                        <div class="text-center">
                            <div class="text-4xl mb-2">üéæ</div>
                            <h3 class="text-lg font-bold">Catch the Treat</h3>
                            <p class="text-sm opacity-80">Quick reflexes game</p>
                            <div class="mt-2">
                                <span class="bg-yellow-400 text-yellow-900 px-2 py-1 rounded text-xs">+15 Coins</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mini-game-card" onclick="playGame('puzzle')">
                        <div class="text-center">
                            <div class="text-4xl mb-2">üß©</div>
                            <h3 class="text-lg font-bold">Jigsaw Puzzle</h3>
                            <p class="text-sm opacity-80">Solve pet pictures</p>
                            <div class="mt-2">
                                <span class="bg-yellow-400 text-yellow-900 px-2 py-1 rounded text-xs">+20 Coins</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mini-game-card" onclick="playGame('racing')">
                        <div class="text-center">
                            <div class="text-4xl mb-2">üèÉ</div>
                            <h3 class="text-lg font-bold">Pet Racing</h3>
                            <p class="text-sm opacity-80">Race against AI pets</p>
                            <div class="mt-2">
                                <span class="bg-yellow-400 text-yellow-900 px-2 py-1 rounded text-xs">+25 Coins</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mini-game-card" onclick="playGame('training')">
                        <div class="text-center">
                            <div class="text-4xl mb-2">üéØ</div>
                            <h3 class="text-lg font-bold">Trick Training</h3>
                            <p class="text-sm opacity-80">Teach your pet tricks</p>
                            <div class="mt-2">
                                <span class="bg-yellow-400 text-yellow-900 px-2 py-1 rounded text-xs">+30 Coins</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mini-game-card" onclick="playGame('talent')">
                        <div class="text-center">
                            <div class="text-4xl mb-2">‚≠ê</div>
                            <h3 class="text-lg font-bold">Talent Show</h3>
                            <p class="text-sm opacity-80">Showcase pet abilities</p>
                            <div class="mt-2">
                                <span class="bg-yellow-400 text-yellow-900 px-2 py-1 rounded text-xs">+50 Coins</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Game Area -->
                <div id="gameArea" class="mt-8 pet-card p-6" style="display: none;">
                    <div id="gameContent">
                        <!-- Game content will be dynamically generated -->
                    </div>
                </div>
            </div>

            <!-- Social Section -->
            <div id="socialSection" class="section" style="display: none;">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold mb-4">Social Hub</h2>
                    <p class="text-gray-600">Connect with other pet owners and make friends!</p>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Friends List -->
                    <div class="pet-card p-6">
                        <h3 class="text-lg font-bold mb-4">Friends</h3>
                        <div id="friendsList" class="space-y-3">
                            <div class="flex items-center space-x-3 p-2 bg-gray-50 rounded-lg">
                                <div class="w-10 h-10 bg-gradient-to-r from-pink-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold">A</div>
                                <div class="flex-1">
                                    <div class="font-semibold">Alice</div>
                                    <div class="text-sm text-gray-600">Level 5 ‚Ä¢ Online</div>
                                </div>
                                <button class="text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-comment"></i>
                                </button>
                            </div>
                            
                            <div class="flex items-center space-x-3 p-2 bg-gray-50 rounded-lg">
                                <div class="w-10 h-10 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center text-white font-bold">B</div>
                                <div class="flex-1">
                                    <div class="font-semibold">Bob</div>
                                    <div class="text-sm text-gray-600">Level 8 ‚Ä¢ 2h ago</div>
                                </div>
                                <button class="text-blue-500 hover:text-blue-700">
                                    <i class="fas fa-comment"></i>
                                </button>
                            </div>
                        </div>
                        
                        <button onclick="findFriends()" class="w-full mt-4 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition duration-300">
                            <i class="fas fa-user-plus mr-2"></i>Find Friends
                        </button>
                    </div>
                    
                    <!-- Leaderboards -->
                    <div class="pet-card p-6">
                        <h3 class="text-lg font-bold mb-4">Global Leaderboard</h3>
                        <div class="space-y-2">
                            <div class="flex items-center justify-between p-2 bg-yellow-100 rounded-lg">
                                <div class="flex items-center space-x-2">
                                    <span class="text-yellow-600 font-bold">ü•á</span>
                                    <span class="font-semibold">PetMaster99</span>
                                </div>
                                <span class="text-sm">Level 25</span>
                            </div>
                            
                            <div class="flex items-center justify-between p-2 bg-gray-100 rounded-lg">
                                <div class="flex items-center space-x-2">
                                    <span class="text-gray-600 font-bold">ü•à</span>
                                    <span class="font-semibold">AnimalLover</span>
                                </div>
                                <span class="text-sm">Level 23</span>
                            </div>
                            
                            <div class="flex items-center justify-between p-2 bg-orange-100 rounded-lg">
                                <div class="flex items-center space-x-2">
                                    <span class="text-orange-600 font-bold">ü•â</span>
                                    <span class="font-semibold">CutePets</span>
                                </div>
                                <span class="text-sm">Level 21</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Activity -->
                    <div class="pet-card p-6">
                        <h3 class="text-lg font-bold mb-4">Recent Activity</h3>
                        <div id="activityFeed" class="space-y-3">
                            <div class="social-notification">
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-trophy text-yellow-600"></i>
                                    <span class="text-sm">Alice's pet won a talent show!</span>
                                </div>
                            </div>
                            
                            <div class="social-notification">
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-heart text-red-500"></i>
                                    <span class="text-sm">Bob adopted a new hamster!</span>
                                </div>
                            </div>
                            
                            <div class="social-notification">
                                <div class="flex items-center space-x-2">
                                    <i class="fas fa-star text-blue-500"></i>
                                    <span class="text-sm">Your pet reached level 5!</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Competitions -->
                <div class="mt-6 pet-card p-6">
                    <h3 class="text-xl font-bold mb-4">Weekly Competitions</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-gradient-to-r from-purple-400 to-pink-400 p-4 rounded-lg text-white">
                            <h4 class="font-bold">Cutest Pet Contest</h4>
                            <p class="text-sm opacity-80">Ends in 3 days</p>
                            <button class="mt-2 bg-white text-purple-600 px-3 py-1 rounded text-sm font-semibold">
                                Enter Contest
                            </button>
                        </div>
                        
                        <div class="bg-gradient-to-r from-green-400 to-blue-400 p-4 rounded-lg text-white">
                            <h4 class="font-bold">Trick Championship</h4>
                            <p class="text-sm opacity-80">Ends in 5 days</p>
                            <button class="mt-2 bg-white text-green-600 px-3 py-1 rounded text-sm font-semibold">
                                Enter Contest
                            </button>
                        </div>
                        
                        <div class="bg-gradient-to-r from-orange-400 to-red-400 p-4 rounded-lg text-white">
                            <h4 class="font-bold">Racing Tournament</h4>
                            <p class="text-sm opacity-80">Ends in 1 week</p>
                            <button class="mt-2 bg-white text-orange-600 px-3 py-1 rounded text-sm font-semibold">
                                Enter Contest
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Shop Section -->
            <div id="shopSection" class="section" style="display: none;">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold mb-4">Pet Shop</h2>
                    <div class="flex space-x-4">
                        <button onclick="showShopCategory('food')" class="navigation-tab active" data-category="food">
                            <i class="fas fa-apple-alt mr-2"></i>Food
                        </button>
                        <button onclick="showShopCategory('toys')" class="navigation-tab" data-category="toys">
                            <i class="fas fa-gamepad mr-2"></i>Toys
                        </button>
                        <button onclick="showShopCategory('accessories')" class="navigation-tab" data-category="accessories">
                            <i class="fas fa-gem mr-2"></i>Accessories
                        </button>
                        <button onclick="showShopCategory('furniture')" class="navigation-tab" data-category="furniture">
                            <i class="fas fa-couch mr-2"></i>Furniture
                        </button>
                        <button onclick="showShopCategory('medicine')" class="navigation-tab" data-category="medicine">
                            <i class="fas fa-pills mr-2"></i>Medicine
                        </button>
                    </div>
                </div>
                
                <div id="shopItems" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Shop items will be dynamically generated -->
                </div>
            </div>

            <!-- Achievements Section -->
            <div id="achievementsSection" class="section" style="display: none;">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold mb-4">Achievements</h2>
                    <p class="text-gray-600">Unlock rewards by completing challenges and caring for your pets!</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="pet-card p-6">
                        <div class="flex items-center space-x-4">
                            <div class="achievement-badge">üèÜ</div>
                            <div class="flex-1">
                                <h3 class="font-bold">First Pet</h3>
                                <p class="text-sm text-gray-600">Adopt your first virtual pet</p>
                                <div class="mt-2">
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Completed</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pet-card p-6">
                        <div class="flex items-center space-x-4">
                            <div class="achievement-badge">üçé</div>
                            <div class="flex-1">
                                <h3 class="font-bold">Good Feeder</h3>
                                <p class="text-sm text-gray-600">Feed your pet 100 times</p>
                                <div class="mt-2">
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-blue-600 h-2 rounded-full" style="width: 75%"></div>
                                    </div>
                                    <span class="text-xs text-gray-600">75/100</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pet-card p-6">
                        <div class="flex items-center space-x-4">
                            <div class="achievement-badge">üéÆ</div>
                            <div class="flex-1">
                                <h3 class="font-bold">Game Master</h3>
                                <p class="text-sm text-gray-600">Win 50 mini-games</p>
                                <div class="mt-2">
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-blue-600 h-2 rounded-full" style="width: 40%"></div>
                                    </div>
                                    <span class="text-xs text-gray-600">20/50</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pet-card p-6">
                        <div class="flex items-center space-x-4">
                            <div class="achievement-badge">üí∞</div>
                            <div class="flex-1">
                                <h3 class="font-bold">Coin Collector</h3>
                                <p class="text-sm text-gray-600">Earn 10,000 coins</p>
                                <div class="mt-2">
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Completed</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pet-card p-6">
                        <div class="flex items-center space-x-4">
                            <div class="achievement-badge">‚ù§Ô∏è</div>
                            <div class="flex-1">
                                <h3 class="font-bold">Pet Lover</h3>
                                <p class="text-sm text-gray-600">Keep happiness above 90% for 7 days</p>
                                <div class="mt-2">
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-blue-600 h-2 rounded-full" style="width: 60%"></div>
                                    </div>
                                    <span class="text-xs text-gray-600">4/7 days</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pet-card p-6">
                        <div class="flex items-center space-x-4">
                            <div class="achievement-badge">üåü</div>
                            <div class="flex-1">
                                <h3 class="font-bold">Social Butterfly</h3>
                                <p class="text-sm text-gray-600">Make 10 friends</p>
                                <div class="mt-2">
                                    <div class="w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-blue-600 h-2 rounded-full" style="width: 20%"></div>
                                    </div>
                                    <span class="text-xs text-gray-600">2/10</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Breeding Section -->
            <div id="breedingSection" class="section" style="display: none;">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold mb-4">Pet Breeding Center</h2>
                    <p class="text-gray-600">Breed your pets to create unique offspring with special traits!</p>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Breeding Interface -->
                    <div class="pet-card p-6">
                        <h3 class="text-lg font-bold mb-4">Select Parents</h3>
                        
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                                <div id="parent1" class="mb-2">
                                    <div class="text-4xl mb-2">‚ûï</div>
                                    <p class="text-sm text-gray-600">Select Parent 1</p>
                                </div>
                            </div>
                            
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                                <div id="parent2" class="mb-2">
                                    <div class="text-4xl mb-2">‚ûï</div>
                                    <p class="text-sm text-gray-600">Select Parent 2</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-center mb-4">
                            <div class="breeding-animation text-4xl mb-2">üíï</div>
                            <button onclick="startBreeding()" class="bg-pink-500 hover:bg-pink-600 text-white px-6 py-2 rounded-lg transition duration-300 disabled:opacity-50" disabled>
                                <i class="fas fa-heart mr-2"></i>Start Breeding
                            </button>
                        </div>
                        
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">Breeding Requirements:</h4>
                            <ul class="text-sm text-gray-600 space-y-1">
                                <li>‚Ä¢ Both pets must be adults (6+ months)</li>
                                <li>‚Ä¢ Both pets must have 80+ happiness</li>
                                <li>‚Ä¢ Breeding costs 500 coins</li>
                                <li>‚Ä¢ Gestation period: 24 hours</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- Genetics Preview -->
                    <div class="pet-card p-6">
                        <h3 class="text-lg font-bold mb-4">Offspring Preview</h3>
                        
                        <div class="text-center mb-6">
                            <div class="w-24 h-24 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-4xl mx-auto mb-4">
                                ‚ùì
                            </div>
                            <p class="text-gray-600">Select two parents to see potential offspring</p>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="bg-green-50 p-3 rounded-lg">
                                <h4 class="font-semibold text-green-800">Possible Traits:</h4>
                                <div class="flex flex-wrap gap-2 mt-2">
                                    <span class="bg-green-200 text-green-800 px-2 py-1 rounded text-xs">Playful</span>
                                    <span class="bg-green-200 text-green-800 px-2 py-1 rounded text-xs">Intelligent</span>
                                    <span class="bg-green-200 text-green-800 px-2 py-1 rounded text-xs">Loyal</span>
                                </div>
                            </div>
                            
                            <div class="bg-purple-50 p-3 rounded-lg">
                                <h4 class="font-semibold text-purple-800">Rare Combinations:</h4>
                                <p class="text-sm text-purple-600 mt-1">Cat + Dog = 5% chance for unique "Cog" hybrid</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Breeding History -->
                <div class="mt-6 pet-card p-6">
                    <h3 class="text-lg font-bold mb-4">Breeding History & Nursery</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-gradient-to-r from-blue-100 to-purple-100 p-4 rounded-lg">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-semibold">Fluffy Jr.</h4>
                                <span class="text-sm text-gray-600">2 weeks old</span>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl mb-2">üê±</div>
                                <p class="text-sm">Parents: Whiskers √ó Snowball</p>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-r from-green-100 to-blue-100 p-4 rounded-lg">
                            <div class="flex items-center justify-between mb-2">
                                <h4 class="font-semibold">Buddy II</h4>
                                <span class="text-sm text-gray-600">1 month old</span>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl mb-2">üê∂</div>
                                <p class="text-sm">Parents: Rex √ó Luna</p>
                            </div>
                        </div>
                        
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center">
                            <div class="text-2xl mb-2">ü•ö</div>
                            <p class="text-sm text-gray-600">Hatching in 8 hours</p>
                            <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                                <div class="bg-pink-600 h-2 rounded-full" style="width: 65%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Statistics Section -->
            <div id="statsSection" class="section" style="display: none;">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold mb-4">Statistics & Analytics</h2>
                    <p class="text-gray-600">Track your pet care performance and progress over time</p>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Pet Care Stats -->
                    <div class="pet-card p-6">
                        <h3 class="text-lg font-bold mb-4">Pet Care Statistics</h3>
                        <canvas id="careChart" width="400" height="200"></canvas>
                    </div>
                    
                    <!-- Activity Timeline -->
                    <div class="pet-card p-6">
                        <h3 class="text-lg font-bold mb-4">Weekly Activity</h3>
                        <canvas id="activityChart" width="400" height="200"></canvas>
                    </div>
                    
                    <!-- Overall Stats -->
                    <div class="pet-card p-6 col-span-full">
                        <h3 class="text-lg font-bold mb-4">Overall Performance</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                            <div class="text-center">
                                <div class="text-3xl font-bold text-blue-600">156</div>
                                <div class="text-sm text-gray-600">Total Feedings</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-green-600">89</div>
                                <div class="text-sm text-gray-600">Games Played</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-purple-600">34</div>
                                <div class="text-sm text-gray-600">Days Active</div>
                            </div>
                            <div class="text-center">
                                <div class="text-3xl font-bold text-yellow-600">12,450</div>
                                <div class="text-sm text-gray-600">Coins Earned</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Notifications -->
    <div id="notification" class="notification"></div>

    <!-- Modals -->
    <div id="modalOverlay" class="modal" style="display: none;">
        <div class="modal-content">
            <div id="modalContent">
                <!-- Modal content will be dynamically generated -->
            </div>
        </div>
    </div>

    <script>
        // Game State
        let gameState = {
            user: null,
            currentPet: {
                name: "Whiskers",
                type: "cat",
                emoji: "üê±",
                age: 3,
                level: 1,
                experience: 150,
                maxExperience: 200,
                health: 85,
                hunger: 60,
                happiness: 75,
                energy: 90,
                cleanliness: 70,
                mood: "happy",
                traits: ["playful", "curious"],
                lastFed: Date.now() - 2 * 60 * 60 * 1000,
                lastPlayed: Date.now() - 1 * 60 * 60 * 1000,
                lastCleaned: Date.now() - 4 * 60 * 60 * 1000,
                lastSlept: Date.now() - 8 * 60 * 60 * 1000
            },
            pets: [],
            coins: 1000,
            level: 1,
            achievements: [],
            inventory: {
                food: ['kibble', 'treats', 'premium_food'],
                toys: ['ball', 'rope', 'mouse_toy'],
                accessories: ['collar', 'hat'],
                furniture: ['bed', 'food_bowl', 'toy_box']
            },
            house: {
                bedroom: {},
                kitchen: {},
                garden: {},
                playroom: {}
            },
            friends: [],
            currentRoom: 'playroom',
            timeOfDay: 'day',
            weather: 'sunny'
        };

        // Initialize game
        document.addEventListener('DOMContentLoaded', function() {
            checkLogin();
            initializeGame();
            startGameLoop();
            initializeCharts();
        });

        // Authentication functions
        function checkLogin() {
            const savedUser = localStorage.getItem('petverse_user');
            if (savedUser) {
                gameState.user = JSON.parse(savedUser);
                showGameScreen();
            } else {
                showLoginScreen();
            }
        }

        function showLogin() {
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registerForm').style.display = 'none';
        }

        function showRegister() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
        }

        function login() {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            
            if (username && password) {
                const user = { username, coins: 1000, level: 1 };
                gameState.user = user;
                localStorage.setItem('petverse_user', JSON.stringify(user));
                showGameScreen();
                showNotification('Welcome back, ' + username + '!', 'success');
            } else {
                showNotification('Please enter username and password', 'error');
            }
        }

        function register() {
            const username = document.getElementById('registerUsername').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            if (username && email && password) {
                const user = { username, email, coins: 1000, level: 1 };
                gameState.user = user;
                localStorage.setItem('petverse_user', JSON.stringify(user));
                showGameScreen();
                showNotification('Account created successfully! Welcome to PetVerse!', 'success');
            } else {
                showNotification('Please fill in all fields', 'error');
            }
        }

        function logout() {
            localStorage.removeItem('petverse_user');
            gameState.user = null;
            showLoginScreen();
            showNotification('Logged out successfully', 'info');
        }

        function showLoginScreen() {
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('gameScreen').style.display = 'none';
        }

        function showGameScreen() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            updateUI();
        }

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.style.display = 'none');
            
            // Show selected section
            document.getElementById(sectionName + 'Section').style.display = 'block';
            
            // Update navigation tabs
            const tabs = document.querySelectorAll('.navigation-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            // Load section-specific content
            switch(sectionName) {
                case 'pets':
                    loadPetCollection();
                    break;
                case 'house':
                    loadHouseDesigner();
                    break;
                case 'shop':
                    loadShop();
                    break;
                case 'stats':
                    updateCharts();
                    break;
            }
        }

        // Pet care functions
        function feedPet() {
            if (gameState.currentPet.hunger < 100) {
                gameState.currentPet.hunger = Math.min(100, gameState.currentPet.hunger + 25);
                gameState.currentPet.happiness = Math.min(100, gameState.currentPet.happiness + 10);
                gameState.currentPet.lastFed = Date.now();
                gainExperience(5);
                showFloatingHearts();
                showNotification(gameState.currentPet.name + ' enjoyed the meal!', 'success');
                updatePetMood();
                updateUI();
            } else {
                showNotification(gameState.currentPet.name + ' is not hungry right now', 'info');
            }
        }

        function playWithPet() {
            if (gameState.currentPet.energy > 20) {
                gameState.currentPet.happiness = Math.min(100, gameState.currentPet.happiness + 20);
                gameState.currentPet.energy = Math.max(0, gameState.currentPet.energy - 20);
                gameState.currentPet.lastPlayed = Date.now();
                gainExperience(10);
                showFloatingHearts();
                showNotification(gameState.currentPet.name + ' had a great time playing!', 'success');
                updatePetMood();
                updateUI();
            } else {
                showNotification(gameState.currentPet.name + ' is too tired to play', 'info');
            }
        }

        function cleanPet() {
            if (gameState.currentPet.cleanliness < 100) {
                gameState.currentPet.cleanliness = Math.min(100, gameState.currentPet.cleanliness + 30);
                gameState.currentPet.happiness = Math.min(100, gameState.currentPet.happiness + 5);
                gameState.currentPet.lastCleaned = Date.now();
                gainExperience(5);
                showNotification(gameState.currentPet.name + ' feels fresh and clean!', 'success');
                updatePetMood();
                updateUI();
            } else {
                showNotification(gameState.currentPet.name + ' is already clean', 'info');
            }
        }

        function sleepPet() {
            if (gameState.currentPet.energy < 100) {
                gameState.currentPet.energy = Math.min(100, gameState.currentPet.energy + 40);
                gameState.currentPet.lastSlept = Date.now();
                showNotification(gameState.currentPet.name + ' had a good nap!', 'success');
                updatePetMood();
                updateUI();
            } else {
                showNotification(gameState.currentPet.name + ' is not tired right now', 'info');
            }
        }

        function takeToVet() {
            if (gameState.coins >= 50) {
                gameState.coins -= 50;
                gameState.currentPet.health = 100;
                showNotification('Veterinary visit complete! ' + gameState.currentPet.name + ' is in perfect health!', 'success');
                updateUI();
            } else {
                showNotification('You need 50 coins for a vet visit', 'error');
            }
        }

        // Game mechanics
        function gainExperience(amount) {
            gameState.currentPet.experience += amount;
            if (gameState.currentPet.experience >= gameState.currentPet.maxExperience) {
                levelUp();
            }
        }

        function levelUp() {
            gameState.currentPet.level++;
            gameState.currentPet.experience = 0;
            gameState.currentPet.maxExperience = gameState.currentPet.level * 100;
            gameState.coins += gameState.currentPet.level * 50;
            showNotification(gameState.currentPet.name + ' leveled up! Level ' + gameState.currentPet.level, 'success');
        }

        function updatePetMood() {
            const avg = (gameState.currentPet.health + gameState.currentPet.hunger + 
                        gameState.currentPet.happiness + gameState.currentPet.energy + 
                        gameState.currentPet.cleanliness) / 5;
            
            if (avg >= 80) {
                gameState.currentPet.mood = 'happy';
                document.getElementById('currentPetMood').textContent = 'üòä';
            } else if (avg >= 60) {
                gameState.currentPet.mood = 'neutral';
                document.getElementById('currentPetMood').textContent = 'üòê';
            } else if (avg >= 40) {
                gameState.currentPet.mood = 'sad';
                document.getElementById('currentPetMood').textContent = 'üò¢';
            } else {
                gameState.currentPet.mood = 'sick';
                document.getElementById('currentPetMood').textContent = 'üò∑';
            }
        }

        function showFloatingHearts() {
            const avatar = document.getElementById('currentPetAvatar');
            const hearts = document.createElement('div');
            hearts.className = 'floating-hearts';
            hearts.textContent = 'üíï';
            hearts.style.position = 'absolute';
            hearts.style.left = Math.random() * 100 + 'px';
            hearts.style.top = Math.random() * 100 + 'px';
            avatar.appendChild(hearts);
            
            setTimeout(() => {
                if (hearts.parentNode) {
                    hearts.parentNode.removeChild(hearts);
                }
            }, 2000);
        }

        // UI update functions
        function updateUI() {
            // Update pet display
            document.getElementById('currentPetName').textContent = gameState.currentPet.name;
            document.getElementById('currentPetAvatar').textContent = gameState.currentPet.emoji;
            document.getElementById('currentPetAge').textContent = 'Age: ' + gameState.currentPet.age + ' months';
            
            // Update status bars
            updateStatusBar('health', gameState.currentPet.health);
            updateStatusBar('hunger', gameState.currentPet.hunger);
            updateStatusBar('happiness', gameState.currentPet.happiness);
            updateStatusBar('energy', gameState.currentPet.energy);
            updateStatusBar('cleanliness', gameState.currentPet.cleanliness);
            
            // Update experience
            const expPercent = (gameState.currentPet.experience / gameState.currentPet.maxExperience) * 100;
            document.getElementById('experienceBar').style.width = expPercent + '%';
            document.getElementById('experienceValue').textContent = 
                gameState.currentPet.experience + '/' + gameState.currentPet.maxExperience;
            
            // Update user stats
            document.getElementById('userCoins').textContent = gameState.coins;
            document.getElementById('userLevel').textContent = gameState.currentPet.level;
        }

        function updateStatusBar(stat, value) {
            const bar = document.getElementById(stat + 'Bar');
            const valueSpan = document.getElementById(stat + 'Value');
            bar.style.width = value + '%';
            valueSpan.textContent = value + '/100';
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification show';
            
            // Set color based on type
            switch(type) {
                case 'success':
                    notification.style.background = 'linear-gradient(45deg, #10B981, #059669)';
                    break;
                case 'error':
                    notification.style.background = 'linear-gradient(45deg, #EF4444, #DC2626)';
                    break;
                case 'info':
                    notification.style.background = 'linear-gradient(45deg, #3B82F6, #2563EB)';
                    break;
            }
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Game loop for time-based mechanics
        function startGameLoop() {
            setInterval(() => {
                updatePetNeeds();
                updateTimeAndWeather();
            }, 60000); // Update every minute
        }

        function updatePetNeeds() {
            const now = Date.now();
            const hoursPassed = {
                feed: (now - gameState.currentPet.lastFed) / (1000 * 60 * 60),
                play: (now - gameState.currentPet.lastPlayed) / (1000 * 60 * 60),
                clean: (now - gameState.currentPet.lastCleaned) / (1000 * 60 * 60),
                sleep: (now - gameState.currentPet.lastSlept) / (1000 * 60 * 60)
            };
            
            // Decrease stats over time
            if (hoursPassed.feed > 1) {
                gameState.currentPet.hunger = Math.max(0, gameState.currentPet.hunger - 5);
            }
            if (hoursPassed.clean > 2) {
                gameState.currentPet.cleanliness = Math.max(0, gameState.currentPet.cleanliness - 3);
            }
            if (hoursPassed.sleep > 6) {
                gameState.currentPet.energy = Math.max(0, gameState.currentPet.energy - 10);
            }
            if (hoursPassed.play > 3) {
                gameState.currentPet.happiness = Math.max(0, gameState.currentPet.happiness - 8);
            }
            
            updatePetMood();
            updateUI();
        }

        function updateTimeAndWeather() {
            const hour = new Date().getHours();
            const dayNightCycle = document.getElementById('dayNightCycle');
            
            if (hour >= 6 && hour < 18) {
                gameState.timeOfDay = 'day';
                dayNightCycle.className = 'day-night-cycle day';
            } else {
                gameState.timeOfDay = 'night';
                dayNightCycle.className = 'day-night-cycle night';
            }
            
            // Random weather changes
            if (Math.random() < 0.1) {
                const weathers = ['sunny', 'cloudy', 'rainy', 'snowy'];
                gameState.weather = weathers[Math.floor(Math.random() * weathers.length)];
                updateWeatherDisplay();
            }
        }

        function updateWeatherDisplay() {
            const weatherText = document.getElementById('weatherText');
            const weatherIcon = document.querySelector('#currentWeather i');
            const weatherEffect = document.getElementById('weatherEffect');
            
            switch(gameState.weather) {
                case 'sunny':
                    weatherText.textContent = 'Sunny';
                    weatherIcon.className = 'fas fa-sun';
                    weatherEffect.className = 'weather-effect';
                    break;
                case 'cloudy':
                    weatherText.textContent = 'Cloudy';
                    weatherIcon.className = 'fas fa-cloud';
                    weatherEffect.className = 'weather-effect';
                    break;
                case 'rainy':
                    weatherText.textContent = 'Rainy';
                    weatherIcon.className = 'fas fa-cloud-rain';
                    weatherEffect.className = 'weather-effect rain';
                    break;
                case 'snowy':
                    weatherText.textContent = 'Snowy';
                    weatherIcon.className = 'fas fa-snowflake';
                    weatherEffect.className = 'weather-effect';
                    break;
            }
        }

        // Pet collection functions
        function loadPetCollection() {
            const collection = document.getElementById('petCollection');
            collection.innerHTML = '';
            
            // Add current pet
            const petCard = createPetCard(gameState.currentPet, true);
            collection.appendChild(petCard);
            
            // Add placeholder for more pets
            for (let i = 0; i < 5; i++) {
                const placeholder = document.createElement('div');
                placeholder.className = 'pet-card p-6 text-center border-2 border-dashed border-gray-300';
                placeholder.innerHTML = `
                    <div class="text-6xl mb-4">‚ûï</div>
                    <p class="text-gray-600">Adopt a new pet</p>
                    <button onclick="adoptNewPet()" class="mt-4 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition duration-300">
                        Adopt Pet
                    </button>
                `;
                collection.appendChild(placeholder);
            }
        }

        function createPetCard(pet, isActive = false) {
            const card = document.createElement('div');
            card.className = `pet-card p-6 ${isActive ? 'ring-2 ring-blue-500' : ''}`;
            card.innerHTML = `
                <div class="text-center">
                    <div class="text-6xl mb-4">${pet.emoji}</div>
                    <h3 class="text-xl font-bold mb-2">${pet.name}</h3>
                    <p class="text-gray-600 mb-2">Level ${pet.level}</p>
                    <p class="text-gray-600 mb-4">Age: ${pet.age} months</p>
                    
                    <div class="space-y-2 mb-4">
                        <div class="flex justify-between text-sm">
                            <span>Health:</span>
                            <span>${pet.health}/100</span>
                        </div>
                        <div class="status-bar">
                            <div class="status-fill bg-green-500" style="width: ${pet.health}%"></div>
                        </div>
                        
                        <div class="flex justify-between text-sm">
                            <span>Happiness:</span>
                            <span>${pet.happiness}/100</span>
                        </div>
                        <div class="status-bar">
                            <div class="status-fill bg-pink-500" style="width: ${pet.happiness}%"></div>
                        </div>
                    </div>
                    
                    ${!isActive ? `<button onclick="switchToPet('${pet.id}')" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition duration-300">Select Pet</button>` : '<span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">Active Pet</span>'}
                </div>
            `;
            return card;
        }

        function adoptNewPet() {
            showModal(`
                <h2 class="text-2xl font-bold mb-4">Adopt a New Pet</h2>
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div class="pet-option p-4 border rounded-lg cursor-pointer hover:bg-blue-50" onclick="selectPetType('cat')">
                        <div class="text-4xl text-center mb-2">üê±</div>
                        <h3 class="font-bold text-center">Cat</h3>
                        <p class="text-sm text-gray-600 text-center">Independent and playful</p>
                    </div>
                    <div class="pet-option p-4 border rounded-lg cursor-pointer hover:bg-blue-50" onclick="selectPetType('dog')">
                        <div class="text-4xl text-center mb-2">üê∂</div>
                        <h3 class="font-bold text-center">Dog</h3>
                        <p class="text-sm text-gray-600 text-center">Loyal and energetic</p>
                    </div>
                    <div class="pet-option p-4 border rounded-lg cursor-pointer hover:bg-blue-50" onclick="selectPetType('bird')">
                        <div class="text-4xl text-center mb-2">üê¶</div>
                        <h3 class="font-bold text-center">Bird</h3>
                        <p class="text-sm text-gray-600 text-center">Colorful and intelligent</p>
                    </div>
                    <div class="pet-option p-4 border rounded-lg cursor-pointer hover:bg-blue-50" onclick="selectPetType('fish')">
                        <div class="text-4xl text-center mb-2">üê†</div>
                        <h3 class="font-bold text-center">Fish</h3>
                        <p class="text-sm text-gray-600 text-center">Peaceful and calming</p>
                    </div>
                    <div class="pet-option p-4 border rounded-lg cursor-pointer hover:bg-blue-50" onclick="selectPetType('hamster')">
                        <div class="text-4xl text-center mb-2">üêπ</div>
                        <h3 class="font-bold text-center">Hamster</h3>
                        <p class="text-sm text-gray-600 text-center">Small and adorable</p>
                    </div>
                    <div class="pet-option p-4 border rounded-lg cursor-pointer hover:bg-blue-50" onclick="selectPetType('rabbit')">
                        <div class="text-4xl text-center mb-2">üê∞</div>
                        <h3 class="font-bold text-center">Rabbit</h3>
                        <p class="text-sm text-gray-600 text-center">Gentle and cute</p>
                    </div>
                </div>
                <button onclick="closeModal()" class="w-full bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition duration-300">
                    Cancel
                </button>
            `);
        }

        function selectPetType(type) {
            const petEmojis = {
                cat: 'üê±',
                dog: 'üê∂',
                bird: 'üê¶',
                fish: 'üê†',
                hamster: 'üêπ',
                rabbit: 'üê∞'
            };
            
            const names = {
                cat: ['Whiskers', 'Shadow', 'Luna', 'Tiger', 'Mittens'],
                dog: ['Buddy', 'Max', 'Bella', 'Charlie', 'Lucy'],
                bird: ['Tweety', 'Sky', 'Azure', 'Sunny', 'Feather'],
                fish: ['Bubble', 'Splash', 'Coral', 'Neptune', 'Pearl'],
                hamster: ['Peanut', 'Nibbles', 'Cheeks', 'Tiny', 'Squeaky'],
                rabbit: ['Bunny', 'Hop', 'Cotton', 'Clover', 'Snowball']
            };
            
            if (gameState.coins >= 200) {
                gameState.coins -= 200;
                const randomName = names[type][Math.floor(Math.random() * names[type].length)];
                showNotification(`Congratulations! You adopted ${randomName} the ${type}!`, 'success');
                closeModal();
                updateUI();
            } else {
                showNotification('You need 200 coins to adopt a pet', 'error');
            }
        }

        // House designer functions
        function loadHouseDesigner() {
            generateRoomLayout();
            generateFurnitureInventory();
        }

        function switchRoom(roomName) {
            gameState.currentRoom = roomName;
            document.getElementById('currentRoomTitle').textContent = 
                roomName.charAt(0).toUpperCase() + roomName.slice(1);
            
            // Update active tab
            const tabs = document.querySelectorAll('[data-room]');
            tabs.forEach(tab => tab.classList.remove('active'));
            document.querySelector(`[data-room="${roomName}"]`).classList.add('active');
            
            generateRoomLayout();
        }

        function generateRoomLayout() {
            const layout = document.getElementById('roomLayout');
            layout.innerHTML = '';
            
            for (let i = 0; i < 25; i++) {
                const tile = document.createElement('div');
                tile.className = 'room-tile';
                tile.onclick = () => placeFurniture(i);
                layout.appendChild(tile);
            }
        }

        function generateFurnitureInventory() {
            const inventory = document.getElementById('furnitureInventory');
            inventory.innerHTML = '';
            
            const furniture = {
                bed: 'üõèÔ∏è',
                chair: 'ü™ë',
                table: 'ü™ë',
                plant: 'ü™¥',
                lamp: 'üí°',
                toy: 'üß∏',
                food_bowl: 'ü•£',
                bookshelf: 'üìö'
            };
            
            Object.entries(furniture).forEach(([name, emoji]) => {
                const item = document.createElement('div');
                item.className = 'furniture-item';
                item.textContent = emoji;
                item.onclick = () => selectFurniture(name);
                inventory.appendChild(item);
            });
        }

        let selectedFurniture = null;

        function selectFurniture(type) {
            selectedFurniture = type;
            const items = document.querySelectorAll('.furniture-item');
            items.forEach(item => item.classList.remove('ring-2', 'ring-blue-500'));
            event.target.classList.add('ring-2', 'ring-blue-500');
        }

        function placeFurniture(position) {
            if (selectedFurniture) {
                const tile = document.querySelectorAll('.room-tile')[position];
                const furniture = {
                    bed: 'üõèÔ∏è',
                    chair: 'ü™ë',
                    table: 'ü™ë',
                    plant: 'ü™¥',
                    lamp: 'üí°',
                    toy: 'üß∏',
                    food_bowl: 'ü•£',
                    bookshelf: 'üìö'
                };
                
                tile.innerHTML = `<div class="text-2xl">${furniture[selectedFurniture]}</div>`;
                tile.style.borderColor = '#667eea';
                showNotification(`Placed ${selectedFurniture} in the room!`, 'success');
            }
        }

        function saveRoomLayout() {
            showNotification('Room layout saved!', 'success');
        }

        function clearRoom() {
            generateRoomLayout();
            showNotification('Room cleared!', 'info');
        }

        // Exploration functions
        function exploreLocation(location) {
            const locations = {
                park: {
                    icon: 'üèûÔ∏è',
                    title: 'City Park',
                    rewards: ['coins', 'happiness', 'energy']
                },
                beach: {
                    icon: 'üèñÔ∏è',
                    title: 'Sunny Beach',
                    rewards: ['treasure', 'happiness', 'experience']
                },
                forest: {
                    icon: 'üå≤',
                    title: 'Mystery Forest',
                    rewards: ['rare_items', 'health', 'adventure']
                },
                city: {
                    icon: 'üèôÔ∏è',
                    title: 'Downtown',
                    rewards: ['coins', 'social', 'shopping']
                }
            };
            
            const loc = locations[location];
            const explorationArea = document.getElementById('explorationArea');
            
            document.getElementById('explorationIcon').textContent = loc.icon;
            document.getElementById('explorationTitle').textContent = `Exploring ${loc.title}`;
            
            explorationArea.style.display = 'block';
            
            // Simulate exploration
            setTimeout(() => {
                const rewards = loc.rewards[Math.floor(Math.random() * loc.rewards.length)];
                let rewardText = '';
                
                switch(rewards) {
                    case 'coins':
                        const coinReward = Math.floor(Math.random() * 50) + 20;
                        gameState.coins += coinReward;
                        rewardText = `Found ${coinReward} coins!`;
                        break;
                    case 'happiness':
                        gameState.currentPet.happiness = Math.min(100, gameState.currentPet.happiness + 15);
                        rewardText = 'Your pet had a wonderful time!';
                        break;
                    case 'experience':
                        gainExperience(20);
                        rewardText = 'Gained valuable experience!';
                        break;
                    case 'treasure':
                        gameState.inventory.toys.push('treasure_chest');
                        rewardText = 'Found a treasure chest!';
                        break;
                    default:
                        rewardText = 'Had an amazing adventure!';
                }
                
                document.getElementById('explorationContent').innerHTML = `
                    <div class="text-green-600 font-bold text-lg mb-2">${rewardText}</div>
                    <p>Your pet enjoyed exploring the ${loc.title}!</p>
                `;
                
                showNotification(rewardText, 'success');
                updateUI();
            }, 3000);
        }

        function finishExploration() {
            document.getElementById('explorationArea').style.display = 'none';
        }

        // Mini-games
        function playGame(gameType) {
            const gameArea = document.getElementById('gameArea');
            gameArea.style.display = 'block';
            
            switch(gameType) {
                case 'memory':
                    loadMemoryGame();
                    break;
                case 'catch':
                    loadCatchGame();
                    break;
                case 'puzzle':
                    loadPuzzleGame();
                    break;
                case 'racing':
                    loadRacingGame();
                    break;
                case 'training':
                    loadTrainingGame();
                    break;
                case 'talent':
                    loadTalentShow();
                    break;
            }
        }

        function loadMemoryGame() {
            document.getElementById('gameContent').innerHTML = `
                <h3 class="text-xl font-bold mb-4">Memory Match Game</h3>
                <div class="grid grid-cols-4 gap-2 mb-4" id="memoryGrid">
                    <!-- Memory cards will be generated -->
                </div>
                <div class="text-center">
                    <button onclick="startMemoryGame()" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition duration-300">
                        Start Game
                    </button>
                    <button onclick="closeGame()" class="ml-2 bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition duration-300">
                        Close
                    </button>
                </div>
                <div id="gameScore" class="text-center mt-4 font-bold"></div>
            `;
        }

        function startMemoryGame() {
            const symbols = ['üê±', 'üê∂', 'üê¶', 'üê†', 'üêπ', 'üê∞', 'ü¶î', 'üê∏'];
            const cards = [...symbols, ...symbols].sort(() => Math.random() - 0.5);
            const grid = document.getElementById('memoryGrid');
            
            grid.innerHTML = '';
            let flippedCards = [];
            let matches = 0;
            
            cards.forEach((symbol, index) => {
                const card = document.createElement('div');
                card.className = 'w-16 h-16 bg-blue-500 rounded-lg flex items-center justify-center cursor-pointer text-2xl';
                card.style.backgroundColor = '#3B82F6';
                card.onclick = () => flipCard(card, symbol, index);
                grid.appendChild(card);
            });
            
            function flipCard(card, symbol, index) {
                if (flippedCards.length < 2 && !card.classList.contains('flipped')) {
                    card.textContent = symbol;
                    card.style.backgroundColor = '#FFF';
                    card.classList.add('flipped');
                    flippedCards.push({card, symbol, index});
                    
                    if (flippedCards.length === 2) {
                        setTimeout(() => {
                            if (flippedCards[0].symbol === flippedCards[1].symbol) {
                                matches++;
                                document.getElementById('gameScore').textContent = `Matches: ${matches}/8`;
                                if (matches === 8) {
                                    gameState.coins += 20;
                                    gameState.currentPet.happiness = Math.min(100, gameState.currentPet.happiness + 15);
                                    showNotification('Memory game completed! +20 coins', 'success');
                                    updateUI();
                                }
                            } else {
                                flippedCards.forEach(({card}) => {
                                    card.textContent = '';
                                    card.style.backgroundColor = '#3B82F6';
                                    card.classList.remove('flipped');
                                });
                            }
                            flippedCards = [];
                        }, 1000);
                    }
                }
            }
        }

        function loadCatchGame() {
            document.getElementById('gameContent').innerHTML = `
                <h3 class="text-xl font-bold mb-4">Catch the Treat!</h3>
                <div class="relative bg-green-200 h-64 rounded-lg mb-4 overflow-hidden" id="catchGameArea">
                    <div id="catchBasket" class="absolute bottom-2 w-16 h-8 bg-brown-500 rounded-lg" style="left: 50%; transform: translateX(-50%); background: #8B5A00;">üß∫</div>
                </div>
                <div class="text-center">
                    <button onclick="startCatchGame()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg transition duration-300">
                        Start Game
                    </button>
                    <button onclick="closeGame()" class="ml-2 bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition duration-300">
                        Close
                    </button>
                </div>
                <div id="catchScore" class="text-center mt-4 font-bold">Score: 0</div>
            `;
        }

        function startCatchGame() {
            let score = 0;
            let gameTime = 30;
            const gameArea = document.getElementById('catchGameArea');
            const basket = document.getElementById('catchBasket');
            const scoreDisplay = document.getElementById('catchScore');
            
            // Move basket with mouse
            gameArea.addEventListener('mousemove', (e) => {
                const rect = gameArea.getBoundingClientRect();
                const x = e.clientX - rect.left - 32; // Center the basket
                basket.style.left = Math.max(0, Math.min(x, gameArea.offsetWidth - 64)) + 'px';
            });
            
            const gameInterval = setInterval(() => {
                if (gameTime <= 0) {
                    clearInterval(gameInterval);
                    gameState.coins += score * 2;
                    gameState.currentPet.happiness = Math.min(100, gameState.currentPet.happiness + 10);
                    showNotification(`Game over! Score: ${score}. +${score * 2} coins`, 'success');
                    updateUI();
                    return;
                }
                
                // Spawn falling treat
                const treat = document.createElement('div');
                treat.textContent = 'üçñ';
                treat.className = 'absolute text-2xl';
                treat.style.left = Math.random() * (gameArea.offsetWidth - 32) + 'px';
                treat.style.top = '0px';
                gameArea.appendChild(treat);
                
                // Animate treat falling
                let treatY = 0;
                const treatFall = setInterval(() => {
                    treatY += 5;
                    treat.style.top = treatY + 'px';
                    
                    // Check collision with basket
                    const treatRect = treat.getBoundingClientRect();
                    const basketRect = basket.getBoundingClientRect();
                    
                    if (treatRect.bottom >= basketRect.top &&
                        treatRect.left < basketRect.right &&
                        treatRect.right > basketRect.left) {
                        score++;
                        scoreDisplay.textContent = `Score: ${score}`;
                        treat.remove();
                        clearInterval(treatFall);
                    } else if (treatY > gameArea.offsetHeight) {
                        treat.remove();
                        clearInterval(treatFall);
                    }
                }, 50);
                
                gameTime--;
            }, 1000);
        }

        function loadPuzzleGame() {
            document.getElementById('gameContent').innerHTML = `
                <h3 class="text-xl font-bold mb-4">Jigsaw Puzzle</h3>
                <div class="grid grid-cols-3 gap-1 mb-4 w-64 h-64 mx-auto bg-gray-200 p-2 rounded-lg" id="puzzleGrid">
                    <!-- Puzzle pieces will be generated -->
                </div>
                <div class="text-center">
                    <button onclick="startPuzzleGame()" class="bg-purple-500 hover:bg-purple-600 text-white px-6 py-2 rounded-lg transition duration-300">
                        Start Puzzle
                    </button>
                    <button onclick="closeGame()" class="ml-2 bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition duration-300">
                        Close
                    </button>
                </div>
                <div id="puzzleStatus" class="text-center mt-4 font-bold">Click Start to begin!</div>
            `;
        }

        function startPuzzleGame() {
            const pieces = [1, 2, 3, 4, 5, 6, 7, 8, 0]; // 0 represents empty space
            const solved = [1, 2, 3, 4, 5, 6, 7, 8, 0];
            let currentState = [...pieces].sort(() => Math.random() - 0.5);
            
            renderPuzzle();
            
            function renderPuzzle() {
                const grid = document.getElementById('puzzleGrid');
                grid.innerHTML = '';
                
                currentState.forEach((piece, index) => {
                    const tile = document.createElement('div');
                    tile.className = 'w-full h-full border border-gray-400 flex items-center justify-center cursor-pointer font-bold text-lg';
                    
                    if (piece === 0) {
                        tile.style.backgroundColor = '#F3F4F6';
                    } else {
                        tile.textContent = piece;
                        tile.style.backgroundColor = '#E5E7EB';
                        tile.onclick = () => movePiece(index);
                    }
                    
                    grid.appendChild(tile);
                });
            }
            
            function movePiece(index) {
                const emptyIndex = currentState.indexOf(0);
                const validMoves = [
                    emptyIndex - 1, emptyIndex + 1, // horizontal
                    emptyIndex - 3, emptyIndex + 3  // vertical
                ].filter(i => {
                    if (i < 0 || i > 8) return false;
                    if (emptyIndex % 3 === 0 && i === emptyIndex - 1) return false;
                    if (emptyIndex % 3 === 2 && i === emptyIndex + 1) return false;
                    return true;
                });
                
                if (validMoves.includes(index)) {
                    [currentState[index], currentState[emptyIndex]] = [currentState[emptyIndex], currentState[index]];
                    renderPuzzle();
                    
                    if (JSON.stringify(currentState) === JSON.stringify(solved)) {
                        document.getElementById('puzzleStatus').textContent = 'Puzzle Solved!';
                        gameState.coins += 25;
                        gameState.currentPet.happiness = Math.min(100, gameState.currentPet.happiness + 20);
                        showNotification('Puzzle completed! +25 coins', 'success');
                        updateUI();
                    }
                }
            }
        }

        function loadRacingGame() {
            document.getElementById('gameContent').innerHTML = `
                <h3 class="text-xl font-bold mb-4">Pet Racing Championship</h3>
                <div class="bg-green-300 h-48 rounded-lg mb-4 relative overflow-hidden" id="raceTrack">
                    <div class="absolute left-2 top-8 text-2xl" id="playerPet">${gameState.currentPet.emoji}</div>
                    <div class="absolute left-2 top-16 text-2xl">üê∂</div>
                    <div class="absolute left-2 top-24 text-2xl">üê±</div>
                    <div class="absolute left-2 top-32 text-2xl">üê∞</div>
                    <div class="absolute right-2 top-8 text-2xl">üèÅ</div>
                    <div class="absolute right-2 top-16 text-2xl">üèÅ</div>
                    <div class="absolute right-2 top-24 text-2xl">üèÅ</div>
                    <div class="absolute right-2 top-32 text-2xl">üèÅ</div>
                </div>
                <div class="text-center">
                    <button onclick="startRace()" class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg transition duration-300">
                        Start Race!
                    </button>
                    <button onclick="closeGame()" class="ml-2 bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition duration-300">
                        Close
                    </button>
                </div>
                <div id="raceStatus" class="text-center mt-4 font-bold">Click Start Race!</div>
            `;
        }

        function startRace() {
            const track = document.getElementById('raceTrack');
            const playerPet = document.getElementById('playerPet');
            const competitors = track.querySelectorAll('.absolute:not(#playerPet):not([class*="right-2"])');
            const statusDiv = document.getElementById('raceStatus');
            
            let playerPosition = 0;
            let competitorPositions = [0, 0, 0];
            const finishLine = track.offsetWidth - 100;
            
            statusDiv.textContent = 'Race in progress...';
            
            const raceInterval = setInterval(() => {
                // Player speed based on pet stats
                const playerSpeed = Math.random() * 5 + (gameState.currentPet.energy / 20);
                playerPosition += playerSpeed;
                playerPet.style.left = Math.min(playerPosition, finishLine) + 'px';
                
                // Competitor speeds
                competitors.forEach((competitor, index) => {
                    const speed = Math.random() * 7 + 2;
                    competitorPositions[index] += speed;
                    competitor.style.left = Math.min(competitorPositions[index], finishLine) + 'px';
                });
                
                // Check for winner
                if (playerPosition >= finishLine) {
                    clearInterval(raceInterval);
                    statusDiv.textContent = 'üèÜ You Won!';
                    gameState.coins += 50;
                    gameState.currentPet.happiness = Math.min(100, gameState.currentPet.happiness + 25);
                    showNotification('Race won! +50 coins', 'success');
                    updateUI();
                } else if (competitorPositions.some(pos => pos >= finishLine)) {
                    clearInterval(raceInterval);
                    statusDiv.textContent = 'üòî You lost, but got participation coins!';
                    gameState.coins += 10;
                    showNotification('Race finished! +10 coins for participating', 'info');
                    updateUI();
                }
            }, 100);
        }

        function loadTrainingGame() {
            document.getElementById('gameContent').innerHTML = `
                <h3 class="text-xl font-bold mb-4">Trick Training Academy</h3>
                <div class="text-center mb-6">
                    <div class="text-6xl mb-4">${gameState.currentPet.emoji}</div>
                    <p class="text-gray-600">Teach your pet new tricks!</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <button onclick="teachTrick('sit')" class="bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg transition duration-300">
                        ü™ë Teach "Sit"
                    </button>
                    <button onclick="teachTrick('roll')" class="bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg transition duration-300">
                        üîÑ Teach "Roll Over"
                    </button>
                    <button onclick="teachTrick('jump')" class="bg-purple-500 hover:bg-purple-600 text-white p-4 rounded-lg transition duration-300">
                        ‚¨ÜÔ∏è Teach "Jump"
                    </button>
                    <button onclick="teachTrick('speak')" class="bg-orange-500 hover:bg-orange-600 text-white p-4 rounded-lg transition duration-300">
                        üó£Ô∏è Teach "Speak"
                    </button>
                </div>
                <div class="text-center">
                    <button onclick="closeGame()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition duration-300">
                        Close
                    </button>
                </div>
                <div id="trainingStatus" class="text-center mt-4 font-bold">Select a trick to teach!</div>
            `;
        }

        function teachTrick(trick) {
            const tricks = {
                sit: { name: 'Sit', emoji: 'ü™ë', difficulty: 1 },
                roll: { name: 'Roll Over', emoji: 'üîÑ', difficulty: 2 },
                jump: { name: 'Jump', emoji: '‚¨ÜÔ∏è', difficulty: 3 },
                speak: { name: 'Speak', emoji: 'üó£Ô∏è', difficulty: 2 }
            };
            
            const selectedTrick = tricks[trick];
            const success = Math.random() > (selectedTrick.difficulty * 0.2);
            
            if (success) {
                gameState.coins += selectedTrick.difficulty * 15;
                gameState.currentPet.happiness = Math.min(100, gameState.currentPet.happiness + 20);
                gainExperience(selectedTrick.difficulty * 10);
                document.getElementById('trainingStatus').textContent = 
                    `‚úÖ Successfully taught "${selectedTrick.name}"! +${selectedTrick.difficulty * 15} coins`;
                showNotification(`${gameState.currentPet.name} learned ${selectedTrick.name}!`, 'success');
            } else {
                document.getElementById('trainingStatus').textContent = 
                    `‚ùå Training failed. ${gameState.currentPet.name} needs more practice!`;
                showNotification('Training failed, try again!', 'info');
            }
            updateUI();
        }

        function loadTalentShow() {
            document.getElementById('gameContent').innerHTML = `
                <h3 class="text-xl font-bold mb-4">‚≠ê Pet Talent Show ‚≠ê</h3>
                <div class="text-center mb-6">
                    <div class="text-8xl mb-4">${gameState.currentPet.emoji}</div>
                    <p class="text-gray-600">Showcase your pet's amazing talents!</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                    <button onclick="performTalent('dance')" class="bg-pink-500 hover:bg-pink-600 text-white p-4 rounded-lg transition duration-300">
                        üíÉ Dance Performance
                    </button>
                    <button onclick="performTalent('sing')" class="bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg transition duration-300">
                        üé§ Singing Act
                    </button>
                    <button onclick="performTalent('acrobatics')" class="bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg transition duration-300">
                        ü§∏ Acrobatics Show
                    </button>
                </div>
                <div class="text-center">
                    <button onclick="closeGame()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition duration-300">
                        Close
                    </button>
                </div>
                <div id="talentStatus" class="text-center mt-4 font-bold">Choose a talent to perform!</div>
            `;
        }

        function performTalent(talent) {
            const talents = {
                dance: { name: 'Dance', emoji: 'üíÉ', multiplier: 1.2 },
                sing: { name: 'Singing', emoji: 'üé§', multiplier: 1.5 },
                acrobatics: { name: 'Acrobatics', emoji: 'ü§∏', multiplier: 1.8 }
            };
            
            const selectedTalent = talents[talent];
            const performance = Math.random();
            let score = 0;
            let rating = '';
            
            if (performance > 0.8) {
                score = 100;
                rating = 'üåü Perfect Performance!';
            } else if (performance > 0.6) {
                score = 80;
                rating = '‚≠ê Great Show!';
            } else if (performance > 0.4) {
                score = 60;
                rating = 'üëç Good Effort!';
            } else {
                score = 30;
                rating = 'üëå Nice Try!';
            }
            
            const coinReward = Math.floor(score * selectedTalent.multiplier);
            gameState.coins += coinReward;
            gameState.currentPet.happiness = Math.min(100, gameState.currentPet.happiness + score / 5);
            gainExperience(score / 2);
            
            document.getElementById('talentStatus').innerHTML = `
                <div class="text-lg mb-2">${selectedTalent.emoji} ${selectedTalent.name} Performance</div>
                <div class="text-xl mb-2">${rating}</div>
                <div class="text-green-600 font-bold">Score: ${score}/100</div>
                <div class="text-yellow-600 font-bold">Earned: ${coinReward} coins!</div>
            `;
            
            showNotification(`Talent show complete! Earned ${coinReward} coins`, 'success');
            updateUI();
        }

        function closeGame() {
            document.getElementById('gameArea').style.display = 'none';
        }

        // Shop functions
        function loadShop() {
            showShopCategory('food');
        }

        function showShopCategory(category) {
            const tabs = document.querySelectorAll('[data-category]');
            tabs.forEach(tab => tab.classList.remove('active'));
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            
            const shopItems = document.getElementById('shopItems');
            shopItems.innerHTML = '';
            
            const items = getShopItems(category);
            
            items.forEach(item => {
                const itemCard = document.createElement('div');
                itemCard.className = 'pet-card p-4';
                itemCard.innerHTML = `
                    <div class="text-center">
                        <div class="text-4xl mb-2">${item.emoji}</div>
                        <h3 class="font-bold mb-1">${item.name}</h3>
                        <p class="text-sm text-gray-600 mb-3">${item.description}</p>
                        <div class="flex items-center justify-between">
                            <span class="text-yellow-600 font-bold">${item.price} coins</span>
                            <button onclick="buyItem('${item.id}', ${item.price})" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm transition duration-300">
                                Buy
                            </button>
                        </div>
                    </div>
                `;
                shopItems.appendChild(itemCard);
            });
        }

        function getShopItems(category) {
            const items = {
                food: [
                    { id: 'kibble', name: 'Premium Kibble', emoji: 'ü•ò', price: 20, description: 'High-quality pet food' },
                    { id: 'treats', name: 'Tasty Treats', emoji: 'üçñ', price: 15, description: 'Delicious snacks' },
                    { id: 'fruit', name: 'Fresh Fruit', emoji: 'üçé', price: 10, description: 'Healthy natural food' },
                    { id: 'fish', name: 'Fresh Fish', emoji: 'üêü', price: 25, description: 'Protein-rich meal' }
                ],
                toys: [
                    { id: 'ball', name: 'Bouncy Ball', emoji: '‚öΩ', price: 30, description: 'Fun interactive toy' },
                    { id: 'rope', name: 'Rope Toy', emoji: 'ü™¢', price: 25, description: 'Great for tugging' },
                    { id: 'mouse', name: 'Toy Mouse', emoji: 'üê≠', price: 20, description: 'Perfect for cats' },
                    { id: 'frisbee', name: 'Flying Frisbee', emoji: 'ü•è', price: 35, description: 'Outdoor fun toy' }
                ],
                accessories: [
                    { id: 'collar', name: 'Designer Collar', emoji: 'üéÄ', price: 50, description: 'Stylish pet collar' },
                    { id: 'hat', name: 'Cute Hat', emoji: 'üé©', price: 40, description: 'Adorable headwear' },
                    { id: 'bow', name: 'Bow Tie', emoji: 'üéÄ', price: 30, description: 'Formal accessory' },
                    { id: 'bandana', name: 'Cool Bandana', emoji: 'üß£', price: 25, description: 'Trendy neck wear' }
                ],
                furniture: [
                    { id: 'bed', name: 'Luxury Pet Bed', emoji: 'üõèÔ∏è', price: 100, description: 'Comfortable sleeping' },
                    { id: 'house', name: 'Pet House', emoji: 'üè†', price: 200, description: 'Cozy pet shelter' },
                    { id: 'tree', name: 'Cat Tree', emoji: 'üå≥', price: 150, description: 'Climbing fun' },
                    { id: 'feeder', name: 'Auto Feeder', emoji: 'ü§ñ', price: 120, description: 'Automatic feeding' }
                ],
                medicine: [
                    { id: 'vitamins', name: 'Pet Vitamins', emoji: 'üíä', price: 60, description: 'Health supplements' },
                    { id: 'shampoo', name: 'Pet Shampoo', emoji: 'üß¥', price: 40, description: 'Gentle cleaning' },
                    { id: 'brush', name: 'Grooming Brush', emoji: 'ü™•', price: 35, description: 'Professional grooming' },
                    { id: 'medicine', name: 'Health Potion', emoji: '‚öóÔ∏è', price: 80, description: 'Instant health boost' }
                ]
            };
            
            return items[category] || [];
        }

        function buyItem(itemId, price) {
            if (gameState.coins >= price) {
                gameState.coins -= price;
                
                // Add item to inventory (simplified)
                const category = getCurrentShopCategory();
                if (!gameState.inventory[category]) {
                    gameState.inventory[category] = [];
                }
                gameState.inventory[category].push(itemId);
                
                showNotification(`Purchased ${itemId}!`, 'success');
                updateUI();
            } else {
                showNotification('Not enough coins!', 'error');
            }
        }

        function getCurrentShopCategory() {
            const activeTab = document.querySelector('[data-category].active');
            return activeTab ? activeTab.getAttribute('data-category') : 'food';
        }

        // Social functions
        function findFriends() {
            showNotification('Searching for friends...', 'info');
            // Simulate finding friends
            setTimeout(() => {
                showNotification('Found 3 new
